<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="First to cross the finish line wins!"><!-- <meta property="og:title" content="Ride the Pony"> --><!-- <meta property="og:description" content="My description"> --><!-- <meta property="og:type" content="website"> --><!-- <meta property="og:image" content="https://via.placeholder.com/500"> --><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Monoton&display=fallback" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,400;0,700;1,900&display=fallback" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><!-- <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"> --><!-- <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png"> --><title>Ride the Pony</title><style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1}body{background-color:#fff;color:#333;font-family:Lato,Arial,Helvetica,sans-serif}a{color:inherit;text-decoration:none}a,button,input{font-family:Lato,Arial,Helvetica,sans-serif}button{background-color:#222;border:none;border-radius:2px;color:#fff;cursor:pointer;font-size:21px;padding:15px;width:100%}button:active{border:1px solid #333;color:#333;outline:1px solid #333}button:focus{border:1px solid #333;color:#333;outline:1px solid #333}input{box-sizing:border-box;font-family:Lato,Arial,Helvetica,sans-serif;font-size:30px;font-weight:400;margin-bottom:40px;width:100%}label{font-family:Lato,Arial,Helvetica,sans-serif;font-size:21px;font-weight:200}.hidden{display:none!important}.hide{display:none!important}.invisible{visibility:hidden}.spacer{border-bottom:1px dashed #777;margin:10px 0}.page-wrapper{margin:0 auto;max-width:1000px;padding:10px 30px}.button-wrapper{text-align:center;padding:10px 0}.container{padding-bottom:30px}.room-code{text-transform:uppercase}.bold{font-weight:700}.bold.link{font-weight:700;padding:10px 0}.header{width:100vw;text-align:center;background-color:#222;color:#fff;font-weight:200;padding:10px 0}.header h1{color:#fff;font-family:Monoton,cursive;font-size:24px;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing]{max-width:420px;margin:0 auto}[data-screen=landing] [data-input=room-code]{text-transform:uppercase}[data-screen=landing] button{color:#ff0;font-family:Monoton,cursive;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing] .game-name{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby]{font-size:20px;max-width:420px;margin:0 auto}[data-screen=lobby] button{max-width:250px}[data-screen=lobby] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby] .game-name{padding-bottom:10px}[data-group=host] [data-screen=lobby]{max-width:1000px;margin:0 auto}[data-group=host] [data-screen=lobby] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-position:right;background-size:contain;background-repeat:no-repeat}[data-group=host] [data-screen=lobby] .track{border-bottom:1px dashed #333;padding-top:20px}[data-group=host] [data-screen=lobby] .waiting{text-align:center;padding:30px 0;text-transform:uppercase}[data-group=player] [data-screen=lobby] .section-title{text-align:center;border-bottom:1px dotted #333}[data-group=player] [data-screen=lobby] .player-list .player{padding:10px;border-bottom:1px dotted #ccc}[data-group=player] [data-screen=lobby] .menu{margin-bottom:20px}[data-group=player] [data-screen=lobby] .menu table{margin:0 auto;border-collapse:collapse}[data-group=player] [data-screen=lobby] .menu td{width:100px;height:54px;border:1px solid #ccc}[data-group=player] [data-screen=lobby] .menu button{width:100%;height:100%;background-color:transparent;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:center}[data-group=player] [data-screen=lobby] .menu button[data-hue='0']{filter:hue-rotate(0)}[data-group=player] [data-screen=lobby] .menu button[data-hue='40']{filter:hue-rotate(40deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='80']{filter:hue-rotate(80deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='120']{filter:hue-rotate(120deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='160']{filter:hue-rotate(160deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='200']{filter:hue-rotate(200deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='240']{filter:hue-rotate(240deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='280']{filter:hue-rotate(280deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='320']{filter:hue-rotate(320deg)}[data-screen=gameIntro]{max-width:1000px;margin:0 auto}[data-screen=gameIntro] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=gameIntro] .game-name{padding-bottom:10px}[data-screen=gameIntro] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:right}[data-screen=gameIntro] .tracks{margin-bottom:20px}[data-screen=gameIntro] .tracks.hot .horse{background-image:url(images/simple_cartoon_horse.gif);transition:all 1s linear}[data-screen=gameIntro] .track{border-bottom:1px dashed #333;padding-top:20px}[data-screen=gameIntro] .race-again{text-align:center}[data-screen=gameIntro] .race-again button{max-width:200px;text-transform:capitalize}</style></head><body><div class="header"><h1>tipsy.games</h1></div><div class="page-wrapper"><div class="container" data-screen="landing"><div class="game-name">Ride the Pony</div><div><label>Room Code</label><input data-input="room-code" type="text" placeholder="AAAA"></div><div><label>Player Name</label><input data-input="player-name" type="text" placeholder="guest"></div><div class="button-wrapper"><button data-action="joinGame">Join Game</button></div><div class="spacer"></div><div class="button-wrapper"><button data-action="newGame">New Game</button></div></div><div data-group="host"><div class="container hidden" data-screen="lobby"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div></div><div class="tracks"></div><div class="waiting">waiting for players to join</div><div class="start-game-wrapper"><div class="button-wrapper hide"><button data-action="startGame">Start Race</button></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="countdown bold"></div><div class="leader bold hide">GO</div></div></div><div class="tracks"></div><div class="race-again hide"><button data-action="raceAgain">race again</button></div></div></div></div><div data-group="player"><div class="container hidden" data-screen="lobby"><div data-group="player"><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div><div class="menu"><table><tbody><tr><td><button data-hue="0" data-action="selectPony"></button></td><td><button data-hue="40" data-action="selectPony"></button></td><td><button data-hue="80" data-action="selectPony"></button></td></tr><tr><td><button data-hue="120" data-action="selectPony"></button></td><td><button data-hue="160" data-action="selectPony"></button></td><td><button data-hue="200" data-action="selectPony"></button></td></tr><tr><td><button data-hue="240" data-action="selectPony"></button></td><td><button data-hue="280" data-action="selectPony"></button></td><td><button data-hue="320" data-action="selectPony"></button></td></tr></tbody></table></div><div><div class="section-title">Player List</div><div class="player-list"></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div>The Player's Game</div></div></div></div><script>!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},a=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),i={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,u=c&&!i.call({1:2},1),l=u?function(t){var e=c(this,t);return!!e&&e.enumerable}:i,s={f:l},f=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},p={}.toString,h=function(t){return p.call(t).slice(8,-1)},d="".split,y=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==h(t)?d.call(t,""):Object(t)}:Object,v=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},g=function(t){return y(v(t))},m=function(t){return"object"==typeof t?null!==t:"function"==typeof t},b=function(t,e){if(!m(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!m(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!m(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!m(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},w={}.hasOwnProperty,x=function(t,e){return w.call(t,e)},S=n.document,E=m(S)&&m(S.createElement),L=function(t){return E?S.createElement(t):{}},O=!a&&!o((function(){return 7!=Object.defineProperty(L("div"),"a",{get:function(){return 7}}).a})),T=Object.getOwnPropertyDescriptor,I=a?T:function(t,e){if(t=g(t),e=b(e,!0),O)try{return T(t,e)}catch(t){}if(x(t,e))return f(!s.f.call(t,e),t[e])},k={f:I},R=function(t){if(!m(t))throw TypeError(String(t)+" is not an object");return t},j=Object.defineProperty,N=a?j:function(t,e,r){if(R(t),e=b(e,!0),R(r),O)try{return j(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t},A={f:N},P=a?function(t,e,r){return A.f(t,e,f(1,r))}:function(t,e,r){return t[e]=r,t},M=function(t,e){try{P(n,t,e)}catch(r){n[t]=e}return e},_="__core-js_shared__",C=n[_]||M(_,{}),q=C,D=Function.toString;"function"!=typeof q.inspectSource&&(q.inspectSource=function(t){return D.call(t)});var G,F,U,H=q.inspectSource,J=n.WeakMap,V="function"==typeof J&&/native code/.test(H(J)),$=e((function(t){(t.exports=function(t,e){return q[t]||(q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.0",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),K=0,Y=Math.random(),B=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++K+Y).toString(36)},z=$("keys"),W=function(t){return z[t]||(z[t]=B(t))},X={},Q=n.WeakMap,Z=function(t){return U(t)?F(t):G(t,{})},tt=function(t){return function(e){var r;if(!m(e)||(r=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}};if(V){var et=q.state||(q.state=new Q),rt=et.get,nt=et.has,ot=et.set;G=function(t,e){return e.facade=t,ot.call(et,t,e),e},F=function(t){return rt.call(et,t)||{}},U=function(t){return nt.call(et,t)}}else{var at=W("state");X[at]=!0,G=function(t,e){return e.facade=t,P(t,at,e),e},F=function(t){return x(t,at)?t[at]:{}},U=function(t){return x(t,at)}}var it={set:G,get:F,has:U,enforce:Z,getterFor:tt},ct=e((function(t){var e=it.get,r=it.enforce,o=String(String).split("String");(t.exports=function(t,e,a,i){var c,u=!!i&&!!i.unsafe,l=!!i&&!!i.enumerable,s=!!i&&!!i.noTargetGet;"function"==typeof a&&("string"!=typeof e||x(a,"name")||P(a,"name",e),(c=r(a)).source||(c.source=o.join("string"==typeof e?e:""))),t!==n?(u?!s&&t[e]&&(l=!0):delete t[e],l?t[e]=a:P(t,e,a)):l?t[e]=a:M(e,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||H(this)}))})),ut=n,lt=function(t){return"function"==typeof t?t:void 0},st=function(t,e){return arguments.length<2?lt(ut[t])||lt(n[t]):ut[t]&&ut[t][e]||n[t]&&n[t][e]},ft=Math.ceil,pt=Math.floor,ht=function(t){return isNaN(t=+t)?0:(t>0?pt:ft)(t)},dt=Math.min,yt=function(t){return t>0?dt(ht(t),9007199254740991):0},vt=Math.max,gt=Math.min,mt=function(t,e){var r=ht(t);return r<0?vt(r+e,0):gt(r,e)},bt=function(t){return function(e,r,n){var o,a=g(e),i=yt(a.length),c=mt(n,i);if(t&&r!=r){for(;i>c;)if((o=a[c++])!=o)return!0}else for(;i>c;c++)if((t||c in a)&&a[c]===r)return t||c||0;return!t&&-1}},wt={includes:bt(!0),indexOf:bt(!1)},xt=wt.indexOf,St=function(t,e){var r,n=g(t),o=0,a=[];for(r in n)!x(X,r)&&x(n,r)&&a.push(r);for(;e.length>o;)x(n,r=e[o++])&&(~xt(a,r)||a.push(r));return a},Et=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lt=Et.concat("length","prototype"),Ot=Object.getOwnPropertyNames||function(t){return St(t,Lt)},Tt={f:Ot},It=Object.getOwnPropertySymbols,kt={f:It},Rt=st("Reflect","ownKeys")||function(t){var e=Tt.f(R(t)),r=kt.f;return r?e.concat(r(t)):e},jt=function(t,e){for(var r=Rt(e),n=A.f,o=k.f,a=0;a<r.length;a++){var i=r[a];x(t,i)||n(t,i,o(e,i))}},Nt=/#|\.prototype\./,At=function(t,e){var r=Mt[Pt(t)];return r==Ct||r!=_t&&("function"==typeof e?o(e):!!e)},Pt=At.normalize=function(t){return String(t).replace(Nt,".").toLowerCase()},Mt=At.data={},_t=At.NATIVE="N",Ct=At.POLYFILL="P",qt=At,Dt=k.f,Gt=function(t,e){var r,o,a,i,c,u=t.target,l=t.global,s=t.stat;if(r=l?n:s?n[u]||M(u,{}):(n[u]||{}).prototype)for(o in e){if(i=e[o],a=t.noTargetGet?(c=Dt(r,o))&&c.value:r[o],!qt(l?o:u+(s?".":"#")+o,t.forced)&&void 0!==a){if(typeof i==typeof a)continue;jt(i,a)}(t.sham||a&&a.sham)&&P(i,"sham",!0),ct(r,o,i,t)}},Ft=function(t){return Object(v(t))},Ut=o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));Gt({target:"Date",proto:!0,forced:Ut},{toJSON:function(t){var e=Ft(this),r=b(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}}),Gt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});e((function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,a=Object.create(o.prototype),i=new E(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var s={};function f(){}function p(){}function h(){}var d={};d[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(L([])));v&&v!==e&&r.call(v,o)&&(d=v);var g=h.prototype=f.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,c){var u=l(t[o],t,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,s;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function L(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=g.constructor=h,h.constructor=p,p.displayName=c(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,i,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new b(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},m(g),c(g,i,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function Ht(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Jt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Ht(a,n,o,i,c,"next",t)}function c(t){Ht(a,n,o,i,c,"throw",t)}i(void 0)}))}}function Vt(t){return $t(t)||Kt(t)||Yt(t)||zt()}function $t(t){if(Array.isArray(t))return Bt(t)}function Kt(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Yt(t,e){if(t){if("string"==typeof t)return Bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bt(t,e):void 0}}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Wt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Xt=function(t,e,r){if(Wt(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},Qt=Array.isArray||function(t){return"Array"==h(t)},Zt=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),te=Zt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ee=$("wks"),re=n.Symbol,ne=te?re:re&&re.withoutSetter||B,oe=function(t){return x(ee,t)||(Zt&&x(re,t)?ee[t]=re[t]:ee[t]=ne("Symbol."+t)),ee[t]},ae=oe("species"),ie=function(t,e){var r;return Qt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Qt(r.prototype)?m(r)&&null===(r=r[ae])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},ce=[].push,ue=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,a=6==t,i=7==t,c=5==t||a;return function(u,l,s,f){for(var p,h,d=Ft(u),v=y(d),g=Xt(l,s,3),m=yt(v.length),b=0,w=f||ie,x=e?w(u,m):r||i?w(u,0):void 0;m>b;b++)if((c||b in v)&&(h=g(p=v[b],b,d),t))if(e)x[b]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:ce.call(x,p)}else switch(t){case 4:return!1;case 7:ce.call(x,p)}return a?-1:n||o?o:x}},le={forEach:ue(0),map:ue(1),filter:ue(2),some:ue(3),every:ue(4),find:ue(5),findIndex:ue(6),filterOut:ue(7)},se=function(t,e){var r=[][t];return!!r&&o((function(){r.call(null,e||function(){throw 1},1)}))},fe=Object.defineProperty,pe={},he=function(t){throw t},de=function(t,e){if(x(pe,t))return pe[t];e||(e={});var r=[][t],n=!!x(e,"ACCESSORS")&&e.ACCESSORS,i=x(e,0)?e[0]:he,c=x(e,1)?e[1]:void 0;return pe[t]=!!r&&!o((function(){if(n&&!a)return!0;var t={length:-1};n?fe(t,1,{enumerable:!0,get:he}):t[1]=1,r.call(t,i,c)}))},ye=le.forEach,ve=se("forEach"),ge=de("forEach"),me=ve&&ge?[].forEach:function(t){return ye(this,t,arguments.length>1?arguments[1]:void 0)};Gt({target:"Array",proto:!0,forced:[].forEach!=me},{forEach:me});var be={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var we in be){var xe=n[we],Se=xe&&xe.prototype;if(Se&&Se.forEach!==me)try{P(Se,"forEach",me)}catch(t){Se.forEach=me}}function Ee(t){console.log("display screen:",t),document.querySelectorAll("[data-screen]").forEach((function(t){t.classList.add("hidden")})),document.querySelector('[data-screen="'.concat(t,'"]')).classList.remove("hidden"),window.app.screen=t}var Le,Oe,Te=function(t,e,r){var n=b(e);n in t?A.f(t,n,f(0,r)):t[n]=r},Ie=st("navigator","userAgent")||"",ke=n.process,Re=ke&&ke.versions,je=Re&&Re.v8;je?Oe=(Le=je.split("."))[0]+Le[1]:Ie&&(!(Le=Ie.match(/Edge\/(\d+)/))||Le[1]>=74)&&(Le=Ie.match(/Chrome\/(\d+)/))&&(Oe=Le[1]);var Ne=Oe&&+Oe,Ae=oe("species"),Pe=function(t){return Ne>=51||!o((function(){var e=[];return(e.constructor={})[Ae]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Me=oe("isConcatSpreadable"),_e=9007199254740991,Ce="Maximum allowed index exceeded",qe=Ne>=51||!o((function(){var t=[];return t[Me]=!1,t.concat()[0]!==t})),De=Pe("concat"),Ge=function(t){if(!m(t))return!1;var e=t[Me];return void 0!==e?!!e:Qt(t)},Fe=!qe||!De;Gt({target:"Array",proto:!0,forced:Fe},{concat:function(t){var e,r,n,o,a,i=Ft(this),c=ie(i,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(Ge(a=-1===e?i:arguments[e])){if(u+(o=yt(a.length))>_e)throw TypeError(Ce);for(r=0;r<o;r++,u++)r in a&&Te(c,u,a[r])}else{if(u>=_e)throw TypeError(Ce);Te(c,u++,a)}return c.length=u,c}});var Ue=[].join,He=y!=Object,Je=se("join",",");Gt({target:"Array",proto:!0,forced:He||!Je},{join:function(t){return Ue.call(g(this),void 0===t?",":t)}});var Ve=le.map,$e=Pe("map"),Ke=de("map");Gt({target:"Array",proto:!0,forced:!$e||!Ke},{map:function(t){return Ve(this,t,arguments.length>1?arguments[1]:void 0)}});var Ye=Object.keys||function(t){return St(t,Et)},Be=o((function(){Ye(1)}));function ze(){console.log("render the lobby");var t=window.app.host,e=t.code,r=t.playerList;e&&Qe(e),Xe(r),We(r,2),console.log("beginning to render the lobby")}function We(t,e){var r=Object.keys(t).length,n=document.querySelector('[data-screen="lobby"] button[data-action="startGame"]').parentNode;r<e?n.classList.add("hide"):n.classList.remove("hide")}function Xe(t){console.log("update player list",t);var e=Object.keys(t).map((function(e){var r=t[e],n=r.playerName,o=r.hue;return'<div class="track"><div class="horse" style="filter: hue-rotate('.concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="lobby"] .tracks').innerHTML=e}function Qe(t){document.querySelector('[data-screen="lobby"] .room-code').innerText=t}Gt({target:"Object",stat:!0,forced:Be},{keys:function(t){return Ye(Ft(t))}});var Ze=le.filter,tr=Pe("filter"),er=de("filter");Gt({target:"Array",proto:!0,forced:!tr||!er},{filter:function(t){return Ze(this,t,arguments.length>1?arguments[1]:void 0)}});var rr=[],nr=rr.sort,or=o((function(){rr.sort(void 0)})),ar=o((function(){rr.sort(null)})),ir=se("sort"),cr=or||!ar||!ir;Gt({target:"Array",proto:!0,forced:cr},{sort:function(t){return void 0===t?nr.call(Ft(this)):nr.call(Ft(this),Wt(t))}}),Gt({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var ur=Date.prototype,lr="Invalid Date",sr="toString",fr=ur[sr],pr=ur.getTime;new Date(NaN)+""!=lr&&ct(ur,sr,(function(){var t=pr.call(this);return t==t?fr.call(this):lr}));var hr="\t\n\v\f\r                　\u2028\u2029\ufeff",dr="["+hr+"]",yr=RegExp("^"+dr+dr+"*"),vr=RegExp(dr+dr+"*$"),gr=function(t){return function(e){var r=String(v(e));return 1&t&&(r=r.replace(yr,"")),2&t&&(r=r.replace(vr,"")),r}},mr={start:gr(1),end:gr(2),trim:gr(3)},br=mr.trim,wr=n.parseInt,xr=/^[+-]?0[Xx]/,Sr=8!==wr(hr+"08")||22!==wr(hr+"0x16"),Er=Sr?function(t,e){var r=br(String(t));return wr(r,e>>>0||(xr.test(r)?16:10))}:wr;Gt({global:!0,forced:parseInt!=Er},{parseInt:Er});var Lr=[].slice,Or=/MSIE .\./.test(Ie),Tr=function(t){return function(e,r){var n=arguments.length>2,o=n?Lr.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,r)}};function Ir(){var t=window.app,e=t.host,r=t.player;return e&&e.ref?e.ref:r&&r.ref?r.ref:void 0}Gt({global:!0,bind:!0,forced:Or},{setTimeout:Tr(n.setTimeout),setInterval:Tr(n.setInterval)});var kr,Rr="",jr=!0,Nr=!0;function Ar(){console.log("render game intro"),Nr&&(Nr=!1,Rr=document.querySelector('[data-screen="gameIntro"]').innerHTML),Pr()}function Pr(){return Mr.apply(this,arguments)}function Mr(){return(Mr=Jt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(jr){t.next=2;break}return t.abrupt("return");case 2:jr=!1,document.querySelector('[data-screen="gameIntro"]').innerHTML=Rr,Hr(),_r();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _r(){return Cr.apply(this,arguments)}function Cr(){return(Cr=Jt(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Math.floor(Date.now()/1e3)+10,kr=Jr(),r=Ir(),t.next=5,r.update({outcome:JSON.stringify(kr),race_time:e}).then((function(){qr(e)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function qr(t){var e=Math.floor(Date.now()/1e3),r=t-e;r<=0?Dr():(document.querySelector('[data-screen="gameIntro"] .countdown').innerHTML=r,setTimeout((function(){qr(t)}),1e3))}function Dr(){console.log("start race!!"),document.querySelector('[data-screen="gameIntro"] .countdown').classList.add("hide"),document.querySelector('[data-screen="gameIntro"] .leader').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .tracks').classList.add("hot"),Gr()}function Gr(){console.log("move horses:",kr);var t=0,e=Ur(kr),r=setInterval((function(){console.log("move horses",t);var n=kr.map((function(t){return t.frame})).sort((function(t,e){return t-e}));console.log("frames:",n);for(var o=0;o<kr.length;o++){var a=kr[o].distances,i=document.querySelector('[data-screen="gameIntro"] .track[data-key="'.concat(kr[o].player,'"] .horse'));console.log("distance",a[t]),t>=n[0]?Fr(i,40):Fr(i,a[t])}t>=n[0]+1&&(clearInterval(r),setTimeout((function(){document.querySelector('[data-screen="gameIntro"] .tracks').classList.remove("hot"),document.querySelector('[data-screen="gameIntro"] .race-again').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .leader').innerHTML="winner: ".concat(e),jr=!0}),1e3)),t+=1}),1e3)}function Fr(t,e){console.log("move horse:",t,e),t.style.marginLeft="".concat(parseInt(t.style.marginLeft,10)+e,"px")}function Ur(t){var e=t.sort((function(t,e){return t.frame-e.frame})),r=e.filter((function(t){return t.frame===e[0].frame})).sort((function(t,e){return t.steps-e.steps}))[0];console.log("==== GET WINNER ",r);var n=window.app.host.playerList[r.player].playerName;return console.log("==== PLAYER NAME ",n),n}function Hr(){var t=app.host.playerList;console.log("update player list",t);var e=Object.keys(t).map((function(e){var r=t[e],n=r.playerName,o=r.hue;return'<div class="track" data-key='.concat(e,'><div class="horse" style="margin-left: -100px; filter: hue-rotate(').concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="gameIntro"] .tracks').innerHTML=e}function Jr(){var t=window.app.host.playerList;return Object.keys(t).map((function(t){for(var e=[],r=0,n=0,o=0,a=0;a<100;a++){var i=Vr(30,40);if(r+i>=960){n=a,o=960-r;break}e.push(i),r+=i}return{distances:e,frame:n,player:t,steps:o}}))}function Vr(t,e){return Math.floor(Math.random()*(e-t+1))+t}var $r={gameIntro:Ar,lobby:ze};function Kr(){console.log("render the lobby");var t=window.app.player,e=t.code,r=t.playerList;e&&Br(e),r&&Yr(r),console.log("beginning to render the lobby")}function Yr(t){console.log("update player list",t),document.querySelector('[data-screen="lobby"] .player-list').innerHTML=Object.keys(t).map((function(e){return'<div class="player">'.concat(t[e].playerName,"</div>")})).join("")}function Br(t){document.querySelector('[data-screen="lobby"] .room-code').innerText=t}var zr=function(){console.log("render game intro")},Wr={lobby:Kr,gameIntro:zr},Xr=arguments,Qr=[],Zr=function(){Qr.push.apply(Qr,Vt(Xr))},tn=function(){window.console.log(Qr.join("\n"))};function en(t){return rn.apply(this,arguments)}function rn(){return(rn=Jt(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.playerType,n=e.screen,Zr(),o={host:$r,player:Wr},t.next=5,o[r][n];case 5:if(t.t0=t.sent,!t.t0){t.next=8;break}o[r][n]();case 8:Ee(n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function nn(t){console.log("on player list updated",t),window.app.player.playerList=t.exists()?t.toJSON():{},en({playerType:"player",screen:"lobby"})}var on=function(t){Zr();var e=t.exists()?t.toJSON():"";e&&en({playerType:"player",screen:e})},an=function(){var t=R(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function cn(t,e){return RegExp(t,e)}var un,ln,sn=o((function(){var t=cn("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),fn=o((function(){var t=cn("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),pn={UNSUPPORTED_Y:sn,BROKEN_CARET:fn},hn=RegExp.prototype.exec,dn=String.prototype.replace,yn=hn,vn=(un=/a/,ln=/b*/g,hn.call(un,"a"),hn.call(ln,"a"),0!==un.lastIndex||0!==ln.lastIndex),gn=pn.UNSUPPORTED_Y||pn.BROKEN_CARET,mn=void 0!==/()??/.exec("")[1],bn=vn||mn||gn;bn&&(yn=function(t){var e,r,n,o,a=this,i=gn&&a.sticky,c=an.call(a),u=a.source,l=0,s=t;return i&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),s=String(t).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(u="(?: "+u+")",s=" "+s,l++),r=new RegExp("^(?:"+u+")",c)),mn&&(r=new RegExp("^"+u+"$(?!\\s)",c)),vn&&(e=a.lastIndex),n=hn.call(i?r:a,s),i?n?(n.input=n.input.slice(l),n[0]=n[0].slice(l),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:vn&&n&&(a.lastIndex=a.global?n.index+n[0].length:e),mn&&n&&n.length>1&&dn.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var wn=yn;Gt({target:"RegExp",proto:!0,forced:/./.exec!==wn},{exec:wn});var xn=oe("species"),Sn=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),En="$0"==="a".replace(/./,"$0"),Ln=oe("replace"),On=!!/./[Ln]&&""===/./[Ln]("a","$0"),Tn=!o((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),In=function(t,e,r,n){var a=oe(t),i=!o((function(){var e={};return e[a]=function(){return 7},7!=""[t](e)})),c=i&&!o((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[xn]=function(){return r},r.flags="",r[a]=/./[a]),r.exec=function(){return e=!0,null},r[a](""),!e}));if(!i||!c||"replace"===t&&(!Sn||!En||On)||"split"===t&&!Tn){var u=/./[a],l=r(a,""[t],(function(t,e,r,n,o){return e.exec===wn?i&&!o?{done:!0,value:u.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:En,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:On}),s=l[0],f=l[1];ct(String.prototype,t,s),ct(RegExp.prototype,a,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}n&&P(RegExp.prototype[a],"sham",!0)},kn=oe("match"),Rn=function(t){var e;return m(t)&&(void 0!==(e=t[kn])?!!e:"RegExp"==h(t))},jn=oe("species"),Nn=function(t,e){var r,n=R(t).constructor;return void 0===n||null==(r=R(n)[jn])?e:Wt(r)},An=function(t){return function(e,r){var n,o,a=String(v(e)),i=ht(r),c=a.length;return i<0||i>=c?t?"":void 0:(n=a.charCodeAt(i))<55296||n>56319||i+1===c||(o=a.charCodeAt(i+1))<56320||o>57343?t?a.charAt(i):n:t?a.slice(i,i+2):o-56320+(n-55296<<10)+65536}},Pn={codeAt:An(!1),charAt:An(!0)},Mn=Pn.charAt,_n=function(t,e,r){return e+(r?Mn(t,e).length:1)},Cn=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==h(t))throw TypeError("RegExp#exec called on incompatible receiver");return wn.call(t,e)},qn=[].push,Dn=Math.min,Gn=4294967295,Fn=!o((function(){return!RegExp(Gn,"y")}));function Un(t){var e=decodeURIComponent(document.cookie).split("; ").map((function(t){return t.split(/=/)})).filter((function(e){return e[0]===t}));return e.length?e[0][1]:""}function Hn(t,e){try{document.cookie="".concat(t,"=").concat(e)}catch(t){console.error("tried to cache data in a cookie:",t)}}function Jn(t){return Vn.apply(this,arguments)}function Vn(){return(Vn=Jt(regeneratorRuntime.mark((function t(e){var r,n,o,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.code,console.log("new player"),n=window.firebase.database().ref("rooms/".concat(r)),o="",a="",i=$n(),"0",Hn("playerName",i),t.next=10,n.child("players").push({playerName:i,hue:"0"}).then((function(t){console.log("player set"),o=t.getKey(),n.child("players").child(o).onDisconnect().remove(),console.log("display lobby"),Ee("lobby")}));case 10:return t.abrupt("return",{code:r,listen:Kn,playerKey:o,playerList:a,ref:n});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $n(){return console.log("get player name"),document.querySelector('[data-input="player-name"]').value||"guest"}function Kn(){console.log("listening");var t=window.app.player.ref;t.child("players").on("value",nn),t.child("screen").on("value",on)}In("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(v(this)),o=void 0===r?Gn:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!Rn(t))return e.call(n,t,o);for(var a,i,c,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,f=new RegExp(t.source,l+"g");(a=wn.call(f,n))&&!((i=f.lastIndex)>s&&(u.push(n.slice(s,a.index)),a.length>1&&a.index<n.length&&qn.apply(u,a.slice(1)),c=a[0].length,s=i,u.length>=o));)f.lastIndex===a.index&&f.lastIndex++;return s===n.length?!c&&f.test("")||u.push(""):u.push(n.slice(s)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=v(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,o,r):n.call(String(o),e,r)},function(t,o){var a=r(n,t,this,o,n!==e);if(a.done)return a.value;var i=R(t),c=String(this),u=Nn(i,RegExp),l=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Fn?"y":"g"),f=new u(Fn?i:"^(?:"+i.source+")",s),p=void 0===o?Gn:o>>>0;if(0===p)return[];if(0===c.length)return null===Cn(f,c)?[c]:[];for(var h=0,d=0,y=[];d<c.length;){f.lastIndex=Fn?d:0;var v,g=Cn(f,Fn?c:c.slice(d));if(null===g||(v=Dn(yt(f.lastIndex+(Fn?0:d)),c.length))===h)d=_n(c,d,l);else{if(y.push(c.slice(h,d)),y.length===p)return y;for(var m=1;m<=g.length-1;m++)if(y.push(g[m]),y.length===p)return y;d=h=v}}return y.push(c.slice(h)),y}]}),!Fn);var Yn={displayLog:tn},Bn=!0,zn=function(){return Zr(),document.querySelector('[data-input="room-code"]').value.toLowerCase()},Wn=function(){var t=Jt(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Bn){t.next=2;break}return t.abrupt("return");case 2:if(!window.app.player){t.next=5;break}return t.abrupt("return");case 5:return Bn=!1,e=zn(),r=window.firebase.database().ref("rooms/".concat(e)),n=!1,t.next=11,r.once("value").then((function(t){"lobby"===(t.toJSON()||{}).screen?n=!0:Bn=!0}));case 11:if(!n){t.next=17;break}return document.querySelector('[data-group="host"]').remove(),t.next=15,new Jn({code:e});case 15:Yn.player=t.sent,Yn.player.listen();case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Xn=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function Qn(){for(var t=[],e=0;e<4;e++)t[e]=Zn(Xn);return t.join("")}function Zn(t){return t[Math.floor(Math.random()*t.length)]}function to(t){console.log("on player list updated",t),window.app.host.playerList=t.exists()?t.toJSON():{},en({playerType:"host",screen:"lobby"})}function eo(){return ro.apply(this,arguments)}function ro(){return(ro=Jt(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("new host"),e=Qn(),r=window.firebase.database().ref("rooms/".concat(e)),console.log("ref:",r),n="",t.next=7,r.onDisconnect().remove();case 7:return console.log("ref set lobby"),t.next=10,r.set({screen:"lobby"});case 10:return t.abrupt("return",{code:e,listen:no,playerList:n,ref:r});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function no(){console.log("listening"),window.app.host.ref.child("players").on("value",to)}var oo=!0;function ao(){return io.apply(this,arguments)}function io(){return(io=Jt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.app.host){t.next=3;break}return t.abrupt("return");case 3:if(!oo){t.next=11;break}return oo=!1,document.querySelector('[data-group="player"]').remove(),t.next=8,new eo;case 8:Yn.host=t.sent,Yn.host.listen(),en({playerType:"host",screen:"lobby"});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function co(t){return uo.apply(this,arguments)}function uo(){return(uo=Jt(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Ir(),t.next=3,r.update({screen:e}).then((function(){en({screen:e,playerType:"host"})}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function lo(){return so.apply(this,arguments)}function so(){return(so=Jt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("start game"),"gameIntro"!==window.app.screen&&co("gameIntro");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var fo=!0;function po(t){return ho.apply(this,arguments)}function ho(){return(ho=Jt(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(fo){t.next=2;break}return t.abrupt("return");case 2:return r=e.target.dataset.hue,fo=!1,n=Ir(),o=window.app.player.playerKey,t.next=8,n.child("players").child(o).update({hue:r}).then((function(){console.log("hue is set:",r),fo=!0}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yo(){console.log("race again"),co("lobby")}var vo={joinGame:Wn,newGame:ao,startGame:lo,selectPony:po,raceAgain:yo};function go(t){console.log("clicked:",t);var e=t.target.dataset.action||"";vo[e]&&vo[e](t)}var mo=function(){Zr(),document.addEventListener("click",go,!1)},bo=function(){Zr();var t=Un("playerName");t&&(document.querySelector('[data-input="player-name"]').value=t)},wo=function(){Zr(),window.app=Yn,bo(),mo()};window.addEventListener("load",wo)}()</script><!-- The core Firebase JS SDK is always required and must be listed first --><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script><!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries --><script>var firebaseConfig={apiKey:"AIzaSyBCf6ie1SYSt1u3RNSuwOc2N4Ld-m3C6zA",authDomain:"climb-00.firebaseapp.com",databaseURL:"https://climb-00.firebaseio.com",projectId:"climb-00",storageBucket:"climb-00.appspot.com",messagingSenderId:"735552551317",appId:"1:735552551317:web:0b3bbefcc0b17337289e9c"};firebase.initializeApp(firebaseConfig)</script></body></html>