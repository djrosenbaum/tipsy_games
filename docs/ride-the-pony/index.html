<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="First to cross the finish line wins!"><!-- <meta property="og:title" content="Ride the Pony"> --><!-- <meta property="og:description" content="My description"> --><!-- <meta property="og:type" content="website"> --><!-- <meta property="og:image" content="https://via.placeholder.com/500"> --><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Monoton&display=fallback" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,400;0,700;1,900&display=fallback" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><!-- <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"> --><!-- <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png"> --><title>Ride the Pony</title><style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1}body{background-color:#fff;color:#333;font-family:Lato,Arial,Helvetica,sans-serif}a{color:inherit;text-decoration:none}a,button,input{font-family:Lato,Arial,Helvetica,sans-serif}button{background-color:#222;border:none;border-radius:2px;color:#fff;cursor:pointer;font-size:21px;padding:15px;width:100%}button:active{border:1px solid #333;color:#333;outline:1px solid #333}button:focus{border:1px solid #333;color:#333;outline:1px solid #333}input{box-sizing:border-box;font-family:Lato,Arial,Helvetica,sans-serif;font-size:30px;font-weight:400;margin-bottom:40px;width:100%}label{font-family:Lato,Arial,Helvetica,sans-serif;font-size:21px;font-weight:200}.hidden{display:none!important}.hide{display:none!important}.invisible{visibility:hidden}.spacer{border-bottom:1px dashed #777;margin:10px 0}.page-wrapper{margin:0 auto;max-width:1000px;padding:10px 30px}.button-wrapper{text-align:center;padding:10px 0}.container{padding-bottom:30px}.room-code{text-transform:uppercase}.bold{font-weight:700}.bold.link{font-weight:700;padding:10px 0}.header{width:100vw;text-align:center;background-color:#222;color:#fff;font-weight:200;padding:10px 0}.header h1{color:#fff;font-family:Monoton,cursive;font-size:24px;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing]{max-width:420px;margin:0 auto}[data-screen=landing] [data-input=room-code]{text-transform:uppercase}[data-screen=landing] button{color:#ff0;font-family:Monoton,cursive;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing] .game-name{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby]{font-size:20px;max-width:420px;margin:0 auto}[data-screen=lobby] button{max-width:250px}[data-screen=lobby] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby] .game-name{padding-bottom:10px}[data-group=host] [data-screen=lobby]{max-width:1000px;margin:0 auto}[data-group=host] [data-screen=lobby] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-position:right;background-size:contain;background-repeat:no-repeat}[data-group=host] [data-screen=lobby] .track{border-bottom:1px dashed #333;padding-top:20px}[data-group=host] [data-screen=lobby] .waiting{text-align:center;padding:30px 0;text-transform:uppercase}[data-group=player] [data-screen=lobby] .section-title{text-align:center;border-bottom:1px dotted #333}[data-group=player] [data-screen=lobby] .player-list .player{padding:10px;border-bottom:1px dotted #ccc}[data-group=player] [data-screen=lobby] .menu{margin-bottom:20px}[data-group=player] [data-screen=lobby] .menu table{margin:0 auto;border-collapse:collapse}[data-group=player] [data-screen=lobby] .menu td{width:100px;height:54px;border:1px solid #ccc}[data-group=player] [data-screen=lobby] .menu button{width:100%;height:100%;background-color:transparent;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:center}[data-group=player] [data-screen=lobby] .menu button[data-hue="0"]{filter:hue-rotate(0)}[data-group=player] [data-screen=lobby] .menu button[data-hue="40"]{filter:hue-rotate(40deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="80"]{filter:hue-rotate(80deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="120"]{filter:hue-rotate(120deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="160"]{filter:hue-rotate(160deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="200"]{filter:hue-rotate(200deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="240"]{filter:hue-rotate(240deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="280"]{filter:hue-rotate(280deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="320"]{filter:hue-rotate(320deg)}[data-screen=gameIntro]{max-width:1000px;margin:0 auto}[data-screen=gameIntro] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=gameIntro] .game-name{padding-bottom:10px}[data-screen=gameIntro] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:right}[data-screen=gameIntro] .tracks{margin-bottom:20px}[data-screen=gameIntro] .tracks.hot .horse{background-image:url(images/simple_cartoon_horse.gif);transition:all 1s linear}[data-screen=gameIntro] .track{border-bottom:1px dashed #333;padding-top:20px}[data-screen=gameIntro] .race-again{text-align:center}[data-screen=gameIntro] .race-again button{max-width:200px;text-transform:capitalize}</style></head><body><div class="header"><h1>tipsy.games</h1></div><div class="page-wrapper"><div class="container" data-screen="landing"><div class="game-name">Ride the Pony</div><div><label>Room Code</label><input data-input="room-code" type="text" placeholder="AAAA"></div><div><label>Player Name</label><input data-input="player-name" type="text" placeholder="guest"></div><div class="button-wrapper"><button data-action="joinGame">Join Game</button></div><div class="spacer"></div><div class="button-wrapper"><button data-action="newGame">New Game</button></div></div><div data-group="host"><div class="container hidden" data-screen="lobby"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div></div><div class="tracks"></div><div class="waiting">waiting for players to join</div><div class="start-game-wrapper"><div class="button-wrapper hide"><button data-action="startGame">Start Race</button></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="countdown bold"></div><div class="leader bold hide">GO</div></div></div><div class="tracks"></div><div class="race-again hide"><button data-action="raceAgain">race again</button></div></div></div></div><div data-group="player"><div class="container hidden" data-screen="lobby"><div data-group="player"><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div><div class="menu"><table><tbody><tr><td><button data-hue="0" data-action="selectPony"></button></td><td><button data-hue="40" data-action="selectPony"></button></td><td><button data-hue="80" data-action="selectPony"></button></td></tr><tr><td><button data-hue="120" data-action="selectPony"></button></td><td><button data-hue="160" data-action="selectPony"></button></td><td><button data-hue="200" data-action="selectPony"></button></td></tr><tr><td><button data-hue="240" data-action="selectPony"></button></td><td><button data-hue="280" data-action="selectPony"></button></td><td><button data-hue="320" data-action="selectPony"></button></td></tr></tbody></table></div><div><div class="section-title">Player List</div><div class="player-list"></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div>The Player's Game</div></div></div></div><script>!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return r(null==e&&n.path)}},n.exports),n.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var n=function(t){return t&&t.Math==Math&&t},o=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),i=function(t){try{return!!t()}catch(t){return!0}},a=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l=u&&!c.call({1:2},1),s=l?function(t){var e=u(this,t);return!!e&&e.enumerable}:c,f={f:s},p=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,d=function(t){return h.call(t).slice(8,-1)},y="".split,v=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==d(t)?y.call(t,""):Object(t)}:Object,g=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},m=function(t){return v(g(t))},b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},w=function(t,e){if(!b(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!b(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!b(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!b(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},x={}.hasOwnProperty,S=function(t,e){return x.call(t,e)},E=o.document,L=b(E)&&b(E.createElement),O=function(t){return L?E.createElement(t):{}},T=!a&&!i((function(){return 7!=Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a})),I=Object.getOwnPropertyDescriptor,k=a?I:function(t,e){if(t=m(t),e=w(e,!0),T)try{return I(t,e)}catch(t){}if(S(t,e))return p(!f.f.call(t,e),t[e])},R={f:k},j=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},N=Object.defineProperty,A=a?N:function(t,e,r){if(j(t),e=w(e,!0),j(r),T)try{return N(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t},P={f:A},M=a?function(t,e,r){return P.f(t,e,p(1,r))}:function(t,e,r){return t[e]=r,t},_=function(t,e){try{M(o,t,e)}catch(r){o[t]=e}return e},C="__core-js_shared__",q=o[C]||_(C,{}),D=q,G=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(t){return G.call(t)});var F,U,H,J=D.inspectSource,V=o.WeakMap,$="function"==typeof V&&/native code/.test(J(V)),K=e((function(t){(t.exports=function(t,e){return D[t]||(D[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),Y=0,B=Math.random(),z=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+B).toString(36)},W=K("keys"),X=function(t){return W[t]||(W[t]=z(t))},Q={},Z=o.WeakMap,tt=function(t){return H(t)?U(t):F(t,{})},et=function(t){return function(e){var r;if(!b(e)||(r=U(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}};if($){var rt=new Z,nt=rt.get,ot=rt.has,it=rt.set;F=function(t,e){return it.call(rt,t,e),e},U=function(t){return nt.call(rt,t)||{}},H=function(t){return ot.call(rt,t)}}else{var at=X("state");Q[at]=!0,F=function(t,e){return M(t,at,e),e},U=function(t){return S(t,at)?t[at]:{}},H=function(t){return S(t,at)}}var ct={set:F,get:U,has:H,enforce:tt,getterFor:et},ut=e((function(t){var e=ct.get,r=ct.enforce,n=String(String).split("String");(t.exports=function(t,e,i,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||S(i,"name")||M(i,"name",e),r(i).source=n.join("string"==typeof e?e:"")),t!==o?(c?!l&&t[e]&&(u=!0):delete t[e],u?t[e]=i:M(t,e,i)):u?t[e]=i:_(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||J(this)}))})),lt=o,st=function(t){return"function"==typeof t?t:void 0},ft=function(t,e){return arguments.length<2?st(lt[t])||st(o[t]):lt[t]&&lt[t][e]||o[t]&&o[t][e]},pt=Math.ceil,ht=Math.floor,dt=function(t){return isNaN(t=+t)?0:(t>0?ht:pt)(t)},yt=Math.min,vt=function(t){return t>0?yt(dt(t),9007199254740991):0},gt=Math.max,mt=Math.min,bt=function(t,e){var r=dt(t);return r<0?gt(r+e,0):mt(r,e)},wt=function(t){return function(e,r,n){var o,i=m(e),a=vt(i.length),c=bt(n,a);if(t&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((t||c in i)&&i[c]===r)return t||c||0;return!t&&-1}},xt={includes:wt(!0),indexOf:wt(!1)},St=xt.indexOf,Et=function(t,e){var r,n=m(t),o=0,i=[];for(r in n)!S(Q,r)&&S(n,r)&&i.push(r);for(;e.length>o;)S(n,r=e[o++])&&(~St(i,r)||i.push(r));return i},Lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ot=Lt.concat("length","prototype"),Tt=Object.getOwnPropertyNames||function(t){return Et(t,Ot)},It={f:Tt},kt=Object.getOwnPropertySymbols,Rt={f:kt},jt=ft("Reflect","ownKeys")||function(t){var e=It.f(j(t)),r=Rt.f;return r?e.concat(r(t)):e},Nt=function(t,e){for(var r=jt(e),n=P.f,o=R.f,i=0;i<r.length;i++){var a=r[i];S(t,a)||n(t,a,o(e,a))}},At=/#|\.prototype\./,Pt=function(t,e){var r=_t[Mt(t)];return r==qt||r!=Ct&&("function"==typeof e?i(e):!!e)},Mt=Pt.normalize=function(t){return String(t).replace(At,".").toLowerCase()},_t=Pt.data={},Ct=Pt.NATIVE="N",qt=Pt.POLYFILL="P",Dt=Pt,Gt=R.f,Ft=function(t,e){var r,n,i,a,c,u=t.target,l=t.global,s=t.stat;if(r=l?o:s?o[u]||_(u,{}):(o[u]||{}).prototype)for(n in e){if(a=e[n],i=t.noTargetGet?(c=Gt(r,n))&&c.value:r[n],!Dt(l?n:u+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof a==typeof i)continue;Nt(a,i)}(t.sham||i&&i.sham)&&M(a,"sham",!0),ut(r,n,a,t)}},Ut=function(t){return Object(g(t))},Ht=i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));Ft({target:"Date",proto:!0,forced:Ht},{toJSON:function(t){var e=Ut(this),r=w(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}}),Ft({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});e((function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=w(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var s={};function f(){}function p(){}function h(){}var d={};d[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(L([])));v&&v!==e&&r.call(v,o)&&(d=v);var g=h.prototype=f.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,s;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function L(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=g.constructor=h,h.constructor=p,p.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[i]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),c(g,a,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=L,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function Jt(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Vt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Jt(i,n,o,a,c,"next",t)}function c(t){Jt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function $t(t){return Kt(t)||Yt(t)||Bt(t)||Wt()}function Kt(t){if(Array.isArray(t))return zt(t)}function Yt(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Bt(t,e){if(t){if("string"==typeof t)return zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zt(t,e):void 0}}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Xt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Qt=function(t,e,r){if(Xt(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},Zt=Array.isArray||function(t){return"Array"==d(t)},te=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),ee=te&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,re=K("wks"),ne=o.Symbol,oe=ee?ne:ne&&ne.withoutSetter||z,ie=function(t){return S(re,t)||(te&&S(ne,t)?re[t]=ne[t]:re[t]=oe("Symbol."+t)),re[t]},ae=ie("species"),ce=function(t,e){var r;return Zt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Zt(r.prototype)?b(r)&&null===(r=r[ae])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},ue=[].push,le=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=5==t||i;return function(c,u,l,s){for(var f,p,h=Ut(c),d=v(h),y=Qt(u,l,3),g=vt(d.length),m=0,b=s||ce,w=e?b(c,g):r?b(c,0):void 0;g>m;m++)if((a||m in d)&&(p=y(f=d[m],m,h),t))if(e)w[m]=p;else if(p)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:ue.call(w,f)}else if(o)return!1;return i?-1:n||o?o:w}},se={forEach:le(0),map:le(1),filter:le(2),some:le(3),every:le(4),find:le(5),findIndex:le(6)},fe=function(t,e){var r=[][t];return!!r&&i((function(){r.call(null,e||function(){throw 1},1)}))},pe=Object.defineProperty,he={},de=function(t){throw t},ye=function(t,e){if(S(he,t))return he[t];e||(e={});var r=[][t],n=!!S(e,"ACCESSORS")&&e.ACCESSORS,o=S(e,0)?e[0]:de,c=S(e,1)?e[1]:void 0;return he[t]=!!r&&!i((function(){if(n&&!a)return!0;var t={length:-1};n?pe(t,1,{enumerable:!0,get:de}):t[1]=1,r.call(t,o,c)}))},ve=se.forEach,ge=fe("forEach"),me=ye("forEach"),be=ge&&me?[].forEach:function(t){return ve(this,t,arguments.length>1?arguments[1]:void 0)};Ft({target:"Array",proto:!0,forced:[].forEach!=be},{forEach:be});var we={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var xe in we){var Se=o[xe],Ee=Se&&Se.prototype;if(Ee&&Ee.forEach!==be)try{M(Ee,"forEach",be)}catch(t){Ee.forEach=be}}function Le(t){console.log("display screen:",t),document.querySelectorAll("[data-screen]").forEach((function(t){t.classList.add("hidden")})),document.querySelector('[data-screen="'.concat(t,'"]')).classList.remove("hidden"),window.app.screen=t}var Oe,Te,Ie=function(t,e,r){var n=w(e);n in t?P.f(t,n,p(0,r)):t[n]=r},ke=ft("navigator","userAgent")||"",Re=o.process,je=Re&&Re.versions,Ne=je&&je.v8;Ne?Te=(Oe=Ne.split("."))[0]+Oe[1]:ke&&(!(Oe=ke.match(/Edge\/(\d+)/))||Oe[1]>=74)&&(Oe=ke.match(/Chrome\/(\d+)/))&&(Te=Oe[1]);var Ae=Te&&+Te,Pe=ie("species"),Me=function(t){return Ae>=51||!i((function(){var e=[];return(e.constructor={})[Pe]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},_e=ie("isConcatSpreadable"),Ce=9007199254740991,qe="Maximum allowed index exceeded",De=Ae>=51||!i((function(){var t=[];return t[_e]=!1,t.concat()[0]!==t})),Ge=Me("concat"),Fe=function(t){if(!b(t))return!1;var e=t[_e];return void 0!==e?!!e:Zt(t)},Ue=!De||!Ge;Ft({target:"Array",proto:!0,forced:Ue},{concat:function(t){var e,r,n,o,i,a=Ut(this),c=ce(a,0),u=0;for(e=-1,n=arguments.length;e<n;e++)if(Fe(i=-1===e?a:arguments[e])){if(u+(o=vt(i.length))>Ce)throw TypeError(qe);for(r=0;r<o;r++,u++)r in i&&Ie(c,u,i[r])}else{if(u>=Ce)throw TypeError(qe);Ie(c,u++,i)}return c.length=u,c}});var He=[].join,Je=v!=Object,Ve=fe("join",",");Ft({target:"Array",proto:!0,forced:Je||!Ve},{join:function(t){return He.call(m(this),void 0===t?",":t)}});var $e=se.map,Ke=Me("map"),Ye=ye("map");Ft({target:"Array",proto:!0,forced:!Ke||!Ye},{map:function(t){return $e(this,t,arguments.length>1?arguments[1]:void 0)}});var Be=Object.keys||function(t){return Et(t,Lt)},ze=i((function(){Be(1)}));function We(){console.log("render the lobby");var t=window.app.host,e=t.code,r=t.playerList;e&&Ze(e),Qe(r),Xe(r,2),console.log("beginning to render the lobby")}function Xe(t,e){var r=Object.keys(t).length,n=document.querySelector('[data-screen="lobby"] button[data-action="startGame"]').parentNode;r<e?n.classList.add("hide"):n.classList.remove("hide")}function Qe(t){console.log("update player list",t);var e=Object.keys(t).map((function(e){var r=t[e],n=r.playerName,o=r.hue;return'<div class="track"><div class="horse" style="filter: hue-rotate('.concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="lobby"] .tracks').innerHTML=e}function Ze(t){document.querySelector('[data-screen="lobby"] .room-code').innerText=t}Ft({target:"Object",stat:!0,forced:ze},{keys:function(t){return Be(Ut(t))}});var tr=se.filter,er=Me("filter"),rr=ye("filter");Ft({target:"Array",proto:!0,forced:!er||!rr},{filter:function(t){return tr(this,t,arguments.length>1?arguments[1]:void 0)}});var nr=[],or=nr.sort,ir=i((function(){nr.sort(void 0)})),ar=i((function(){nr.sort(null)})),cr=fe("sort"),ur=ir||!ar||!cr;Ft({target:"Array",proto:!0,forced:ur},{sort:function(t){return void 0===t?or.call(Ut(this)):or.call(Ut(this),Xt(t))}}),Ft({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var lr=Date.prototype,sr="Invalid Date",fr="toString",pr=lr[fr],hr=lr.getTime;new Date(NaN)+""!=sr&&ut(lr,fr,(function(){var t=hr.call(this);return t==t?pr.call(this):sr}));var dr="\t\n\v\f\r                　\u2028\u2029\ufeff",yr="["+dr+"]",vr=RegExp("^"+yr+yr+"*"),gr=RegExp(yr+yr+"*$"),mr=function(t){return function(e){var r=String(g(e));return 1&t&&(r=r.replace(vr,"")),2&t&&(r=r.replace(gr,"")),r}},br={start:mr(1),end:mr(2),trim:mr(3)},wr=br.trim,xr=o.parseInt,Sr=/^[+-]?0[Xx]/,Er=8!==xr(dr+"08")||22!==xr(dr+"0x16"),Lr=Er?function(t,e){var r=wr(String(t));return xr(r,e>>>0||(Sr.test(r)?16:10))}:xr;Ft({global:!0,forced:parseInt!=Lr},{parseInt:Lr});var Or=[].slice,Tr=/MSIE .\./.test(ke),Ir=function(t){return function(e,r){var n=arguments.length>2,o=n?Or.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,o)}:e,r)}};function kr(){var t=window.app,e=t.host,r=t.player;return e&&e.ref?e.ref:r&&r.ref?r.ref:void 0}Ft({global:!0,bind:!0,forced:Tr},{setTimeout:Ir(o.setTimeout),setInterval:Ir(o.setInterval)});var Rr,jr="",Nr=!0,Ar=!0;function Pr(){console.log("render game intro"),Ar&&(Ar=!1,jr=document.querySelector('[data-screen="gameIntro"]').innerHTML),Mr()}function Mr(){return _r.apply(this,arguments)}function _r(){return(_r=Vt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Nr){t.next=2;break}return t.abrupt("return");case 2:Nr=!1,document.querySelector('[data-screen="gameIntro"]').innerHTML=jr,Jr(),Cr();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Cr(){return qr.apply(this,arguments)}function qr(){return(qr=Vt(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Math.floor(Date.now()/1e3)+10,Rr=Vr(),r=kr(),t.next=5,r.update({outcome:JSON.stringify(Rr),race_time:e}).then((function(){Dr(e)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dr(t){var e=Math.floor(Date.now()/1e3),r=t-e;r<=0?Gr():(document.querySelector('[data-screen="gameIntro"] .countdown').innerHTML=r,setTimeout((function(){Dr(t)}),1e3))}function Gr(){console.log("start race!!"),document.querySelector('[data-screen="gameIntro"] .countdown').classList.add("hide"),document.querySelector('[data-screen="gameIntro"] .leader').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .tracks').classList.add("hot"),Fr()}function Fr(){console.log("move horses:",Rr);var t=0,e=Hr(Rr),r=setInterval((function(){console.log("move horses",t);var n=Rr.map((function(t){return t.frame})).sort((function(t,e){return t-e}));console.log("frames:",n);for(var o=0;o<Rr.length;o++){var i=Rr[o].distances,a=document.querySelector('[data-screen="gameIntro"] .track[data-key="'.concat(Rr[o].player,'"] .horse'));console.log("distance",i[t]),t>=n[0]?Ur(a,40):Ur(a,i[t])}t>=n[0]+1&&(clearInterval(r),setTimeout((function(){document.querySelector('[data-screen="gameIntro"] .tracks').classList.remove("hot"),document.querySelector('[data-screen="gameIntro"] .race-again').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .leader').innerHTML="winner: ".concat(e),Nr=!0}),1e3)),t+=1}),1e3)}function Ur(t,e){console.log("move horse:",t,e),t.style.marginLeft="".concat(parseInt(t.style.marginLeft,10)+e,"px")}function Hr(t){var e=t.sort((function(t,e){return t.frame-e.frame})),r=e.filter((function(t){return t.frame===e[0].frame})).sort((function(t,e){return t.steps-e.steps}))[0];console.log("==== GET WINNER ",r);var n=window.app.host.playerList[r.player].playerName;return console.log("==== PLAYER NAME ",n),n}function Jr(){var t=app.host.playerList;console.log("update player list",t);var e=Object.keys(t).map((function(e){var r=t[e],n=r.playerName,o=r.hue;return'<div class="track" data-key='.concat(e,'><div class="horse" style="margin-left: -100px; filter: hue-rotate(').concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="gameIntro"] .tracks').innerHTML=e}function Vr(){var t=window.app.host.playerList;return Object.keys(t).map((function(t){for(var e=[],r=0,n=0,o=0,i=0;i<100;i++){var a=$r(30,40);if(r+a>=960){n=i,o=960-r;break}e.push(a),r+=a}return{distances:e,frame:n,player:t,steps:o}}))}function $r(t,e){return Math.floor(Math.random()*(e-t+1))+t}var Kr={gameIntro:Pr,lobby:We};function Yr(){console.log("render the lobby");var t=window.app.player,e=t.code,r=t.playerList;e&&zr(e),r&&Br(r),console.log("beginning to render the lobby")}function Br(t){console.log("update player list",t),document.querySelector('[data-screen="lobby"] .player-list').innerHTML=Object.keys(t).map((function(e){return'<div class="player">'.concat(t[e].playerName,"</div>")})).join("")}function zr(t){document.querySelector('[data-screen="lobby"] .room-code').innerText=t}var Wr=function(){console.log("render game intro")},Xr={lobby:Yr,gameIntro:Wr},Qr=arguments,Zr=[],tn=function(){Zr.push.apply(Zr,$t(Qr))},en=function(){window.console.log(Zr.join("\n"))};function rn(t){return nn.apply(this,arguments)}function nn(){return(nn=Vt(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.playerType,n=e.screen,tn(),o={host:Kr,player:Xr},t.next=5,o[r][n];case 5:if(t.t0=t.sent,!t.t0){t.next=8;break}o[r][n]();case 8:Le(n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function on(t){console.log("on player list updated",t),window.app.player.playerList=t.exists()?t.toJSON():{},rn({playerType:"player",screen:"lobby"})}var an=function(t){tn();var e=t.exists()?t.toJSON():"";e&&rn({playerType:"player",screen:e})},cn=function(){var t=j(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function un(t,e){return RegExp(t,e)}var ln,sn,fn=i((function(){var t=un("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),pn=i((function(){var t=un("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),hn={UNSUPPORTED_Y:fn,BROKEN_CARET:pn},dn=RegExp.prototype.exec,yn=String.prototype.replace,vn=dn,gn=(ln=/a/,sn=/b*/g,dn.call(ln,"a"),dn.call(sn,"a"),0!==ln.lastIndex||0!==sn.lastIndex),mn=hn.UNSUPPORTED_Y||hn.BROKEN_CARET,bn=void 0!==/()??/.exec("")[1],wn=gn||bn||mn;wn&&(vn=function(t){var e,r,n,o,i=this,a=mn&&i.sticky,c=cn.call(i),u=i.source,l=0,s=t;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),s=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(u="(?: "+u+")",s=" "+s,l++),r=new RegExp("^(?:"+u+")",c)),bn&&(r=new RegExp("^"+u+"$(?!\\s)",c)),gn&&(e=i.lastIndex),n=dn.call(a?r:i,s),a?n?(n.input=n.input.slice(l),n[0]=n[0].slice(l),n.index=i.lastIndex,i.lastIndex+=n[0].length):i.lastIndex=0:gn&&n&&(i.lastIndex=i.global?n.index+n[0].length:e),bn&&n&&n.length>1&&yn.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var xn=vn;Ft({target:"RegExp",proto:!0,forced:/./.exec!==xn},{exec:xn});var Sn=ie("species"),En=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Ln="$0"==="a".replace(/./,"$0"),On=ie("replace"),Tn=!!/./[On]&&""===/./[On]("a","$0"),In=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),kn=function(t,e,r,n){var o=ie(t),a=!i((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),c=a&&!i((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Sn]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!a||!c||"replace"===t&&(!En||!Ln||Tn)||"split"===t&&!In){var u=/./[o],l=r(o,""[t],(function(t,e,r,n,o){return e.exec===xn?a&&!o?{done:!0,value:u.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:Ln,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Tn}),s=l[0],f=l[1];ut(String.prototype,t,s),ut(RegExp.prototype,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}n&&M(RegExp.prototype[o],"sham",!0)},Rn=ie("match"),jn=function(t){var e;return b(t)&&(void 0!==(e=t[Rn])?!!e:"RegExp"==d(t))},Nn=ie("species"),An=function(t,e){var r,n=j(t).constructor;return void 0===n||null==(r=j(n)[Nn])?e:Xt(r)},Pn=function(t){return function(e,r){var n,o,i=String(g(e)),a=dt(r),c=i.length;return a<0||a>=c?t?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===c||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):n:t?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},Mn={codeAt:Pn(!1),charAt:Pn(!0)},_n=Mn.charAt,Cn=function(t,e,r){return e+(r?_n(t,e).length:1)},qn=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==d(t))throw TypeError("RegExp#exec called on incompatible receiver");return xn.call(t,e)},Dn=[].push,Gn=Math.min,Fn=4294967295,Un=!i((function(){return!RegExp(Fn,"y")}));function Hn(t){var e=decodeURIComponent(document.cookie).split("; ").map((function(t){return t.split(/=/)})).filter((function(e){return e[0]===t}));return e.length?e[0][1]:""}function Jn(t,e){try{document.cookie="".concat(t,"=").concat(e)}catch(t){console.error("tried to cache data in a cookie:",t)}}function Vn(t){return $n.apply(this,arguments)}function $n(){return($n=Vt(regeneratorRuntime.mark((function t(e){var r,n,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.code,console.log("new player"),n=window.firebase.database().ref("rooms/".concat(r)),o="",i="",a=Kn(),"0",Jn("playerName",a),t.next=10,n.child("players").push({playerName:a,hue:"0"}).then((function(t){console.log("player set"),o=t.getKey(),n.child("players").child(o).onDisconnect().remove(),console.log("display lobby"),Le("lobby")}));case 10:return t.abrupt("return",{code:r,listen:Yn,playerKey:o,playerList:i,ref:n});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Kn(){return console.log("get player name"),document.querySelector('[data-input="player-name"]').value||"guest"}function Yn(){console.log("listening");var t=window.app.player.ref;t.child("players").on("value",on),t.child("screen").on("value",an)}kn("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(g(this)),o=void 0===r?Fn:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!jn(t))return e.call(n,t,o);for(var i,a,c,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,f=new RegExp(t.source,l+"g");(i=xn.call(f,n))&&!((a=f.lastIndex)>s&&(u.push(n.slice(s,i.index)),i.length>1&&i.index<n.length&&Dn.apply(u,i.slice(1)),c=i[0].length,s=a,u.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return s===n.length?!c&&f.test("")||u.push(""):u.push(n.slice(s)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=g(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,r):n.call(String(o),e,r)},function(t,o){var i=r(n,t,this,o,n!==e);if(i.done)return i.value;var a=j(t),c=String(this),u=An(a,RegExp),l=a.unicode,s=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Un?"y":"g"),f=new u(Un?a:"^(?:"+a.source+")",s),p=void 0===o?Fn:o>>>0;if(0===p)return[];if(0===c.length)return null===qn(f,c)?[c]:[];for(var h=0,d=0,y=[];d<c.length;){f.lastIndex=Un?d:0;var v,g=qn(f,Un?c:c.slice(d));if(null===g||(v=Gn(vt(f.lastIndex+(Un?0:d)),c.length))===h)d=Cn(c,d,l);else{if(y.push(c.slice(h,d)),y.length===p)return y;for(var m=1;m<=g.length-1;m++)if(y.push(g[m]),y.length===p)return y;d=h=v}}return y.push(c.slice(h)),y}]}),!Un);var Bn={displayLog:en},zn=!0,Wn=function(){return tn(),document.querySelector('[data-input="room-code"]').value.toLowerCase()},Xn=function(){var t=Vt(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(zn){t.next=2;break}return t.abrupt("return");case 2:if(!window.app.player){t.next=5;break}return t.abrupt("return");case 5:return zn=!1,e=Wn(),r=window.firebase.database().ref("rooms/".concat(e)),n=!1,t.next=11,r.once("value").then((function(t){"lobby"===(t.toJSON()||{}).screen?n=!0:zn=!0}));case 11:if(!n){t.next=17;break}return document.querySelector('[data-group="host"]').remove(),t.next=15,new Vn({code:e});case 15:Bn.player=t.sent,Bn.player.listen();case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Qn=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function Zn(){for(var t=[],e=0;e<4;e++)t[e]=to(Qn);return t.join("")}function to(t){return t[Math.floor(Math.random()*t.length)]}function eo(t){console.log("on player list updated",t),window.app.host.playerList=t.exists()?t.toJSON():{},rn({playerType:"host",screen:"lobby"})}function ro(){return no.apply(this,arguments)}function no(){return(no=Vt(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("new host"),e=Zn(),r=window.firebase.database().ref("rooms/".concat(e)),console.log("ref:",r),n="",t.next=7,r.onDisconnect().remove();case 7:return console.log("ref set lobby"),t.next=10,r.set({screen:"lobby"});case 10:return t.abrupt("return",{code:e,listen:oo,playerList:n,ref:r});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oo(){console.log("listening"),window.app.host.ref.child("players").on("value",eo)}var io=!0;function ao(){return co.apply(this,arguments)}function co(){return(co=Vt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.app.host){t.next=3;break}return t.abrupt("return");case 3:if(!io){t.next=11;break}return io=!1,document.querySelector('[data-group="player"]').remove(),t.next=8,new ro;case 8:Bn.host=t.sent,Bn.host.listen(),rn({playerType:"host",screen:"lobby"});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function uo(t){return lo.apply(this,arguments)}function lo(){return(lo=Vt(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=kr(),t.next=3,r.update({screen:e}).then((function(){rn({screen:e,playerType:"host"})}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function so(){return fo.apply(this,arguments)}function fo(){return(fo=Vt(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("start game"),"gameIntro"!==window.app.screen&&uo("gameIntro");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var po=!0;function ho(t){return yo.apply(this,arguments)}function yo(){return(yo=Vt(regeneratorRuntime.mark((function t(e){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(po){t.next=2;break}return t.abrupt("return");case 2:return r=e.target.dataset.hue,po=!1,n=kr(),o=window.app.player.playerKey,t.next=8,n.child("players").child(o).update({hue:r}).then((function(){console.log("hue is set:",r),po=!0}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vo(){console.log("race again"),uo("lobby")}var go={joinGame:Xn,newGame:ao,startGame:so,selectPony:ho,raceAgain:vo};function mo(t){console.log("clicked:",t);var e=t.target.dataset.action||"";go[e]&&go[e](t)}var bo=function(){tn(),document.addEventListener("click",mo,!1)},wo=function(){tn();var t=Hn("playerName");t&&(document.querySelector('[data-input="player-name"]').value=t)},xo=function(){tn(),window.app=Bn,wo(),bo()};window.addEventListener("load",xo)}()</script><!-- The core Firebase JS SDK is always required and must be listed first --><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script><!-- TODO: Add SDKs for Firebase products that you want to use
	     https://firebase.google.com/docs/web/setup#available-libraries --><script>var firebaseConfig={apiKey:"AIzaSyBCf6ie1SYSt1u3RNSuwOc2N4Ld-m3C6zA",authDomain:"climb-00.firebaseapp.com",databaseURL:"https://climb-00.firebaseio.com",projectId:"climb-00",storageBucket:"climb-00.appspot.com",messagingSenderId:"735552551317",appId:"1:735552551317:web:0b3bbefcc0b17337289e9c"};firebase.initializeApp(firebaseConfig)</script></body></html>