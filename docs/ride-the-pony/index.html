<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="First to cross the finish line wins!"><!-- <meta property="og:title" content="Ride the Pony"> --><!-- <meta property="og:description" content="My description"> --><!-- <meta property="og:type" content="website"> --><!-- <meta property="og:image" content="https://via.placeholder.com/500"> --><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Monoton&display=fallback" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,400;0,700;1,900&display=fallback" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><!-- <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"> --><!-- <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png"> --><title>Ride the Pony</title><style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1}body{background-color:#fff;color:#333;font-family:Lato,Arial,Helvetica,sans-serif}a{color:inherit;text-decoration:none}a,button,input{font-family:Lato,Arial,Helvetica,sans-serif}button{background-color:#222;border:none;border-radius:2px;color:#fff;cursor:pointer;font-size:21px;padding:15px;width:100%}button:active{border:1px solid #333;color:#333;outline:1px solid #333}button:focus{border:1px solid #333;color:#333;outline:1px solid #333}input{box-sizing:border-box;font-family:Lato,Arial,Helvetica,sans-serif;font-size:30px;font-weight:400;margin-bottom:40px;width:100%}label{font-family:Lato,Arial,Helvetica,sans-serif;font-size:21px;font-weight:200}.hidden{display:none!important}.hide{display:none!important}.invisible{visibility:hidden}.spacer{border-bottom:1px dashed #777;margin:10px 0}.page-wrapper{margin:0 auto;max-width:1000px;padding:10px 30px}.button-wrapper{text-align:center;padding:10px 0}.container{padding-bottom:30px}.room-code{text-transform:uppercase}.bold{font-weight:700}.bold.link{font-weight:700;padding:10px 0}.header{width:100vw;text-align:center;background-color:#222;color:#fff;font-weight:200;padding:10px 0}.header h1{color:#fff;font-family:Monoton,cursive;font-size:24px;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing]{max-width:420px;margin:0 auto}[data-screen=landing] [data-input=room-code]{text-transform:uppercase}[data-screen=landing] button{color:#ff0;font-family:Monoton,cursive;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing] .game-name{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby]{font-size:20px;max-width:420px;margin:0 auto}[data-screen=lobby] button{max-width:250px}[data-screen=lobby] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby] .game-name{padding-bottom:10px}[data-group=host] [data-screen=lobby]{max-width:1000px;margin:0 auto}[data-group=host] [data-screen=lobby] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-position:right;background-size:contain;background-repeat:no-repeat}[data-group=host] [data-screen=lobby] .track{border-bottom:1px dashed #333;padding-top:20px}[data-group=host] [data-screen=lobby] .waiting{text-align:center;padding:30px 0;text-transform:uppercase}[data-group=player] [data-screen=lobby] .section-title{text-align:center;border-bottom:1px dotted #333}[data-group=player] [data-screen=lobby] .player-list .player{padding:10px;border-bottom:1px dotted #ccc}[data-group=player] [data-screen=lobby] .menu{margin-bottom:20px}[data-group=player] [data-screen=lobby] .menu table{margin:0 auto;border-collapse:collapse}[data-group=player] [data-screen=lobby] .menu td{width:100px;height:54px;border:1px solid #ccc}[data-group=player] [data-screen=lobby] .menu button{width:100%;height:100%;background-color:transparent;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:center}[data-group=player] [data-screen=lobby] .menu button[data-hue='0']{filter:hue-rotate(0)}[data-group=player] [data-screen=lobby] .menu button[data-hue='40']{filter:hue-rotate(40deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='80']{filter:hue-rotate(80deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='120']{filter:hue-rotate(120deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='160']{filter:hue-rotate(160deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='200']{filter:hue-rotate(200deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='240']{filter:hue-rotate(240deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='280']{filter:hue-rotate(280deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='320']{filter:hue-rotate(320deg)}[data-screen=gameIntro]{max-width:1000px;margin:0 auto}[data-screen=gameIntro] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=gameIntro] .game-name{padding-bottom:10px}[data-screen=gameIntro] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:right}[data-screen=gameIntro] .tracks{margin-bottom:20px}[data-screen=gameIntro] .tracks.hot .horse{background-image:url(images/simple_cartoon_horse.gif);transition:all 1s linear}[data-screen=gameIntro] .track{border-bottom:1px dashed #333;padding-top:20px}[data-screen=gameIntro] .race-again{text-align:center}[data-screen=gameIntro] .race-again button{max-width:200px;text-transform:capitalize}</style></head><body><div class="header"><h1>tipsy.games</h1></div><div class="page-wrapper"><div class="container" data-screen="landing"><div class="game-name">Ride the Pony</div><div><label>Room Code</label><input data-input="room-code" type="text" placeholder="AAAA"></div><div><label>Player Name</label><input data-input="player-name" type="text" placeholder="guest"></div><div class="button-wrapper"><button data-action="joinGame">Join Game</button></div><div class="spacer"></div><div class="button-wrapper"><button data-action="newGame">New Game</button></div></div><div data-group="host"><div class="container hidden" data-screen="lobby"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div></div><div class="tracks"></div><div class="waiting">waiting for players to join</div><div class="start-game-wrapper"><div class="button-wrapper hide"><button data-action="startGame">Start Race</button></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="countdown bold"></div><div class="leader bold hide">GO</div></div></div><div class="tracks"></div><div class="race-again hide"><button data-action="raceAgain">race again</button></div></div></div></div><div data-group="player"><div class="container hidden" data-screen="lobby"><div data-group="player"><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div><div class="menu"><table><tbody><tr><td><button data-hue="0" data-action="selectPony"></button></td><td><button data-hue="40" data-action="selectPony"></button></td><td><button data-hue="80" data-action="selectPony"></button></td></tr><tr><td><button data-hue="120" data-action="selectPony"></button></td><td><button data-hue="160" data-action="selectPony"></button></td><td><button data-hue="200" data-action="selectPony"></button></td></tr><tr><td><button data-hue="240" data-action="selectPony"></button></td><td><button data-hue="280" data-action="selectPony"></button></td><td><button data-hue="320" data-action="selectPony"></button></td></tr></tbody></table></div><div><div class="section-title">Player List</div><div class="player-list"></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div>The Player's Game</div></div></div></div><script>!function(){"use strict";var e=require("../internals/export"),r=require("../internals/fails"),t=require("../internals/to-object"),n=require("../internals/to-primitive"),o=r((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));e({target:"Date",proto:!0,forced:o},{toJSON:function(e){var r=t(this),o=n(r);return"number"!=typeof o||isFinite(o)?r.toISOString():null}});var a=require("../internals/export");a({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var i=function(e){var r=Object.prototype,t=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{c({},"")}catch(e){c=function(e,r,t){return e[r]=t}}function u(e,r,t,n){var o=r&&r.prototype instanceof p?r:p,a=Object.create(o.prototype),i=new L(n||[]);return a._invoke=function(e,r,t){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(t.method=o,t.arg=a;;){var i=t.delegate;if(i){var c=w(i,t);if(c){if(c===l)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===n)throw n="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);n="executing";var u=s(e,r,t);if("normal"===u.type){if(n=t.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:t.done}}"throw"===u.type&&(n="completed",t.method="throw",t.arg=u.arg)}}}(e,t,i),a}function s(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function p(){}function f(){}function d(){}var h={};h[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(S([])));v&&v!==r&&t.call(v,o)&&(h=v);var g=d.prototype=p.prototype=Object.create(h);function m(e){["next","throw","return"].forEach((function(r){c(e,r,(function(e){return this._invoke(r,e)}))}))}function b(e,r){var n;this._invoke=function(o,a){function i(){return new r((function(n,i){!function n(o,a,i,c){var u=s(e[o],e,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==typeof p&&t.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):r.resolve(p).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,r){var t=e.iterator[r.method];if(void 0===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=void 0,w(e,r),"throw"===r.method))return l;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(t,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,l;var o=n.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,l):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,l)}function x(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function q(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(t.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return a.next=a}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=g.constructor=d,d.constructor=f,f.displayName=c(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===f||"GeneratorFunction"===(r.displayName||r.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(r,t,n,o,a){void 0===a&&(a=Promise);var i=new b(u(r,t,n,o),a);return e.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},m(g),c(g,i,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var r=[];for(var t in e)r.push(t);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(q),!e)for(var r in this)"t"===r.charAt(0)&&t.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t,n){return i.type="throw",i.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=t.call(a,"catchLoc"),u=t.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),l},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),q(t),l}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var o=n.arg;q(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,t){return this.delegate={iterator:S(e),resultName:r,nextLoc:t},"next"===this.method&&(this.arg=void 0),l}},e}("object"==typeof module?module.exports:{});try{regeneratorRuntime=i}catch(e){Function("r","regeneratorRuntime = r")(i)}function c(e,r,t,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void t(e)}c.done?r(u):Promise.resolve(u).then(n,o)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var a=e.apply(r,t);function i(e){c(a,n,o,i,u,"next",e)}function u(e){c(a,n,o,i,u,"throw",e)}i(void 0)}))}}function s(e){return l(e)||p(e)||f(e)||h()}function l(e){if(Array.isArray(e))return d(e)}function p(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e,r){if(e){if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var y=require("../internals/export"),v=require("../internals/array-for-each");y({target:"Array",proto:!0,forced:[].forEach!=v},{forEach:v});var g=require("../internals/global"),m=require("../internals/dom-iterables"),b=require("../internals/array-for-each"),w=require("../internals/create-non-enumerable-property");for(var x in m){var q=g[x],L=q&&q.prototype;if(L&&L.forEach!==b)try{w(L,"forEach",b)}catch(e){L.forEach=b}}function S(e){console.log("display screen:",e),document.querySelectorAll("[data-screen]").forEach((function(e){e.classList.add("hidden")})),document.querySelector('[data-screen="'.concat(e,'"]')).classList.remove("hidden"),window.app.screen=e}var k=require("../internals/export"),j=require("../internals/fails"),E=require("../internals/is-array"),I=require("../internals/is-object"),O=require("../internals/to-object"),N=require("../internals/to-length"),R=require("../internals/create-property"),T=require("../internals/array-species-create"),A=require("../internals/array-method-has-species-support"),M=require("../internals/well-known-symbol"),_=require("../internals/engine-v8-version"),G=M("isConcatSpreadable"),D=9007199254740991,P="Maximum allowed index exceeded",J=_>=51||!j((function(){var e=[];return e[G]=!1,e.concat()[0]!==e})),F=A("concat"),H=function(e){if(!I(e))return!1;var r=e[G];return void 0!==r?!!r:E(e)},C=!J||!F;k({target:"Array",proto:!0,forced:C},{concat:function(e){var r,t,n,o,a,i=O(this),c=T(i,0),u=0;for(r=-1,n=arguments.length;r<n;r++)if(H(a=-1===r?i:arguments[r])){if(u+(o=N(a.length))>D)throw TypeError(P);for(t=0;t<o;t++,u++)t in a&&R(c,u,a[t])}else{if(u>=D)throw TypeError(P);R(c,u++,a)}return c.length=u,c}});var U=require("../internals/export"),K=require("../internals/indexed-object"),Y=require("../internals/to-indexed-object"),z=require("../internals/array-method-is-strict"),W=[].join,$=K!=Object,B=z("join",",");U({target:"Array",proto:!0,forced:$||!B},{join:function(e){return W.call(Y(this),void 0===e?",":e)}});var Q=require("../internals/export"),V=require("../internals/array-iteration").map,X=require("../internals/array-method-has-species-support"),Z=require("../internals/array-method-uses-to-length"),ee=X("map"),re=Z("map");Q({target:"Array",proto:!0,forced:!ee||!re},{map:function(e){return V(this,e,arguments.length>1?arguments[1]:void 0)}});var te=require("../internals/export"),ne=require("../internals/to-object"),oe=require("../internals/object-keys"),ae=require("../internals/fails"),ie=ae((function(){oe(1)}));function ce(){console.log("render the lobby");var e=window.app.host,r=e.code,t=e.playerList;r&&le(r),se(t),ue(t,2),console.log("beginning to render the lobby")}function ue(e,r){var t=Object.keys(e).length,n=document.querySelector('[data-screen="lobby"] button[data-action="startGame"]').parentNode;t<r?n.classList.add("hide"):n.classList.remove("hide")}function se(e){console.log("update player list",e);var r=Object.keys(e).map((function(r){var t=e[r],n=t.playerName,o=t.hue;return'<div class="track"><div class="horse" style="filter: hue-rotate('.concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="lobby"] .tracks').innerHTML=r}function le(e){document.querySelector('[data-screen="lobby"] .room-code').innerText=e}te({target:"Object",stat:!0,forced:ie},{keys:function(e){return oe(ne(e))}});var pe=require("../internals/export"),fe=require("../internals/array-iteration").filter,de=require("../internals/array-method-has-species-support"),he=require("../internals/array-method-uses-to-length"),ye=de("filter"),ve=he("filter");pe({target:"Array",proto:!0,forced:!ye||!ve},{filter:function(e){return fe(this,e,arguments.length>1?arguments[1]:void 0)}});var ge=require("../internals/export"),me=require("../internals/a-function"),be=require("../internals/to-object"),we=require("../internals/fails"),xe=require("../internals/array-method-is-strict"),qe=[],Le=qe.sort,Se=we((function(){qe.sort(void 0)})),ke=we((function(){qe.sort(null)})),je=xe("sort"),Ee=Se||!ke||!je;ge({target:"Array",proto:!0,forced:Ee},{sort:function(e){return void 0===e?Le.call(be(this)):Le.call(be(this),me(e))}});var Ie=require("../internals/export");Ie({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Oe=require("../internals/redefine"),Ne=Date.prototype,Re="Invalid Date",Te="toString",Ae=Ne[Te],Me=Ne.getTime;new Date(NaN)+""!=Re&&Oe(Ne,Te,(function(){var e=Me.call(this);return e==e?Ae.call(this):Re}));var _e=require("../internals/export"),Ge=require("../internals/number-parse-int");_e({global:!0,forced:parseInt!=Ge},{parseInt:Ge});var De=require("../internals/export"),Pe=require("../internals/global"),Je=require("../internals/engine-user-agent"),Fe=[].slice,He=/MSIE .\./.test(Je),Ce=function(e){return function(r,t){var n=arguments.length>2,o=n?Fe.call(arguments,2):void 0;return e(n?function(){("function"==typeof r?r:Function(r)).apply(this,o)}:r,t)}};function Ue(){var e=window.app,r=e.host,t=e.player;return r&&r.ref?r.ref:t&&t.ref?t.ref:void 0}De({global:!0,bind:!0,forced:He},{setTimeout:Ce(Pe.setTimeout),setInterval:Ce(Pe.setInterval)});var Ke,Ye="",ze=!0,We=!0;function $e(){console.log("render game intro"),We&&(We=!1,Ye=document.querySelector('[data-screen="gameIntro"]').innerHTML),Be()}function Be(){return Qe.apply(this,arguments)}function Qe(){return(Qe=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze){e.next=2;break}return e.abrupt("return");case 2:ze=!1,document.querySelector('[data-screen="gameIntro"]').innerHTML=Ye,or(),Ve();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return Xe.apply(this,arguments)}function Xe(){return(Xe=u(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Math.floor(Date.now()/1e3)+10,Ke=ar(),t=Ue(),e.next=5,t.update({outcome:JSON.stringify(Ke),race_time:r}).then((function(){Ze(r)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){var r=Math.floor(Date.now()/1e3),t=e-r;t<=0?er():(document.querySelector('[data-screen="gameIntro"] .countdown').innerHTML=t,setTimeout((function(){Ze(e)}),1e3))}function er(){console.log("start race!!"),document.querySelector('[data-screen="gameIntro"] .countdown').classList.add("hide"),document.querySelector('[data-screen="gameIntro"] .leader').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .tracks').classList.add("hot"),rr()}function rr(){console.log("move horses:",Ke);var e=0,r=nr(Ke),t=setInterval((function(){console.log("move horses",e);var n=Ke.map((function(e){return e.frame})).sort((function(e,r){return e-r}));console.log("frames:",n);for(var o=0;o<Ke.length;o++){var a=Ke[o].distances,i=document.querySelector('[data-screen="gameIntro"] .track[data-key="'.concat(Ke[o].player,'"] .horse'));console.log("distance",a[e]),e>=n[0]?tr(i,40):tr(i,a[e])}e>=n[0]+1&&(clearInterval(t),setTimeout((function(){document.querySelector('[data-screen="gameIntro"] .tracks').classList.remove("hot"),document.querySelector('[data-screen="gameIntro"] .race-again').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .leader').innerHTML="winner: ".concat(r),ze=!0}),1e3)),e+=1}),1e3)}function tr(e,r){console.log("move horse:",e,r),e.style.marginLeft="".concat(parseInt(e.style.marginLeft,10)+r,"px")}function nr(e){var r=e.sort((function(e,r){return e.frame-r.frame})),t=r.filter((function(e){return e.frame===r[0].frame})).sort((function(e,r){return e.steps-r.steps}))[0];console.log("==== GET WINNER ",t);var n=window.app.host.playerList[t.player].playerName;return console.log("==== PLAYER NAME ",n),n}function or(){var e=app.host.playerList;console.log("update player list",e);var r=Object.keys(e).map((function(r){var t=e[r],n=t.playerName,o=t.hue;return'<div class="track" data-key='.concat(r,'><div class="horse" style="margin-left: -100px; filter: hue-rotate(').concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="gameIntro"] .tracks').innerHTML=r}function ar(){var e=window.app.host.playerList;return Object.keys(e).map((function(e){for(var r=[],t=0,n=0,o=0,a=0;a<100;a++){var i=ir(30,40);if(t+i>=960){n=a,o=960-t;break}r.push(i),t+=i}return{distances:r,frame:n,player:e,steps:o}}))}function ir(e,r){return Math.floor(Math.random()*(r-e+1))+e}var cr={gameIntro:$e,lobby:ce};function ur(){console.log("render the lobby");var e=window.app.player,r=e.code,t=e.playerList;r&&lr(r),t&&sr(t),console.log("beginning to render the lobby")}function sr(e){console.log("update player list",e),document.querySelector('[data-screen="lobby"] .player-list').innerHTML=Object.keys(e).map((function(r){return'<div class="player">'.concat(e[r].playerName,"</div>")})).join("")}function lr(e){document.querySelector('[data-screen="lobby"] .room-code').innerText=e}var pr=function(){console.log("render game intro")},fr={lobby:ur,gameIntro:pr},dr=arguments,hr=[],yr=function(){hr.push.apply(hr,s(dr))},vr=function(){window.console.log(hr.join("\n"))};function gr(e){return mr.apply(this,arguments)}function mr(){return(mr=u(regeneratorRuntime.mark((function e(r){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.playerType,n=r.screen,yr(),o={host:cr,player:fr},e.next=5,o[t][n];case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}o[t][n]();case 8:S(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function br(e){console.log("on player list updated",e),window.app.player.playerList=e.exists()?e.toJSON():{},gr({playerType:"player",screen:"lobby"})}var wr=function(e){yr();var r=e.exists()?e.toJSON():"";r&&gr({playerType:"player",screen:r})},xr=require("../internals/export"),qr=require("../internals/regexp-exec");xr({target:"RegExp",proto:!0,forced:/./.exec!==qr},{exec:qr});var Lr=require("../internals/fix-regexp-well-known-symbol-logic"),Sr=require("../internals/is-regexp"),kr=require("../internals/an-object"),jr=require("../internals/require-object-coercible"),Er=require("../internals/species-constructor"),Ir=require("../internals/advance-string-index"),Or=require("../internals/to-length"),Nr=require("../internals/regexp-exec-abstract"),Rr=require("../internals/regexp-exec"),Tr=require("../internals/fails"),Ar=[].push,Mr=Math.min,_r=4294967295,Gr=!Tr((function(){return!RegExp(_r,"y")}));function Dr(e){var r=decodeURIComponent(document.cookie).split("; ").map((function(e){return e.split(/=/)})).filter((function(r){return r[0]===e}));return r.length?r[0][1]:""}function Pr(e,r){try{document.cookie="".concat(e,"=").concat(r)}catch(e){console.error("tried to cache data in a cookie:",e)}}function Jr(e){return Fr.apply(this,arguments)}function Fr(){return(Fr=u(regeneratorRuntime.mark((function e(r){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.code,console.log("new player"),n=window.firebase.database().ref("rooms/".concat(t)),o="",a="",i=Hr(),"0",Pr("playerName",i),e.next=10,n.child("players").push({playerName:i,hue:"0"}).then((function(e){console.log("player set"),o=e.getKey(),n.child("players").child(o).onDisconnect().remove(),console.log("display lobby"),S("lobby")}));case 10:return e.abrupt("return",{code:t,listen:Cr,playerKey:o,playerList:a,ref:n});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(){return console.log("get player name"),document.querySelector('[data-input="player-name"]').value||"guest"}function Cr(){console.log("listening");var e=window.app.player.ref;e.child("players").on("value",br),e.child("screen").on("value",wr)}Lr("split",2,(function(e,r,t){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(jr(this)),o=void 0===t?_r:t>>>0;if(0===o)return[];if(void 0===e)return[n];if(!Sr(e))return r.call(n,e,o);for(var a,i,c,u=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,p=new RegExp(e.source,s+"g");(a=Rr.call(p,n))&&!((i=p.lastIndex)>l&&(u.push(n.slice(l,a.index)),a.length>1&&a.index<n.length&&Ar.apply(u,a.slice(1)),c=a[0].length,l=i,u.length>=o));)p.lastIndex===a.index&&p.lastIndex++;return l===n.length?!c&&p.test("")||u.push(""):u.push(n.slice(l)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,t){var o=jr(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,t):n.call(String(o),r,t)},function(e,o){var a=t(n,e,this,o,n!==r);if(a.done)return a.value;var i=kr(e),c=String(this),u=Er(i,RegExp),s=i.unicode,l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Gr?"y":"g"),p=new u(Gr?i:"^(?:"+i.source+")",l),f=void 0===o?_r:o>>>0;if(0===f)return[];if(0===c.length)return null===Nr(p,c)?[c]:[];for(var d=0,h=0,y=[];h<c.length;){p.lastIndex=Gr?h:0;var v,g=Nr(p,Gr?c:c.slice(h));if(null===g||(v=Mr(Or(p.lastIndex+(Gr?0:h)),c.length))===d)h=Ir(c,h,s);else{if(y.push(c.slice(d,h)),y.length===f)return y;for(var m=1;m<=g.length-1;m++)if(y.push(g[m]),y.length===f)return y;h=d=v}}return y.push(c.slice(d)),y}]}),!Gr);var Ur={displayLog:vr},Kr=!0,Yr=function(){return yr(),document.querySelector('[data-input="room-code"]').value.toLowerCase()},zr=function(){var e=u(regeneratorRuntime.mark((function e(){var r,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kr){e.next=2;break}return e.abrupt("return");case 2:if(!window.app.player){e.next=5;break}return e.abrupt("return");case 5:return Kr=!1,r=Yr(),t=window.firebase.database().ref("rooms/".concat(r)),n=!1,e.next=11,t.once("value").then((function(e){"lobby"===(e.toJSON()||{}).screen?n=!0:Kr=!0}));case 11:if(!n){e.next=17;break}return document.querySelector('[data-group="host"]').remove(),e.next=15,new Jr({code:r});case 15:Ur.player=e.sent,Ur.player.listen();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function $r(){for(var e=[],r=0;r<4;r++)e[r]=Br(Wr);return e.join("")}function Br(e){return e[Math.floor(Math.random()*e.length)]}function Qr(e){console.log("on player list updated",e),window.app.host.playerList=e.exists()?e.toJSON():{},gr({playerType:"host",screen:"lobby"})}function Vr(){return Xr.apply(this,arguments)}function Xr(){return(Xr=u(regeneratorRuntime.mark((function e(){var r,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new host"),r=$r(),t=window.firebase.database().ref("rooms/".concat(r)),console.log("ref:",t),n="",e.next=7,t.onDisconnect().remove();case 7:return console.log("ref set lobby"),e.next=10,t.set({screen:"lobby"});case 10:return e.abrupt("return",{code:r,listen:Zr,playerList:n,ref:t});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zr(){console.log("listening"),window.app.host.ref.child("players").on("value",Qr)}var et=!0;function rt(){return tt.apply(this,arguments)}function tt(){return(tt=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.app.host){e.next=3;break}return e.abrupt("return");case 3:if(!et){e.next=11;break}return et=!1,document.querySelector('[data-group="player"]').remove(),e.next=8,new Vr;case 8:Ur.host=e.sent,Ur.host.listen(),gr({playerType:"host",screen:"lobby"});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return ot.apply(this,arguments)}function ot(){return(ot=u(regeneratorRuntime.mark((function e(r){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ue(),e.next=3,t.update({screen:r}).then((function(){gr({screen:r,playerType:"host"})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(){return it.apply(this,arguments)}function it(){return(it=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("start game"),"gameIntro"!==window.app.screen&&nt("gameIntro");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ct=!0;function ut(e){return st.apply(this,arguments)}function st(){return(st=u(regeneratorRuntime.mark((function e(r){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ct){e.next=2;break}return e.abrupt("return");case 2:return t=r.target.dataset.hue,ct=!1,n=Ue(),o=window.app.player.playerKey,e.next=8,n.child("players").child(o).update({hue:t}).then((function(){console.log("hue is set:",t),ct=!0}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){console.log("race again"),nt("lobby")}var pt={joinGame:zr,newGame:rt,startGame:at,selectPony:ut,raceAgain:lt};function ft(e){console.log("clicked:",e);var r=e.target.dataset.action||"";pt[r]&&pt[r](e)}var dt=function(){yr(),document.addEventListener("click",ft,!1)},ht=function(){yr();var e=Dr("playerName");e&&(document.querySelector('[data-input="player-name"]').value=e)},yt=function(){yr(),window.app=Ur,ht(),dt()};window.addEventListener("load",yt)}()</script><!-- The core Firebase JS SDK is always required and must be listed first --><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script><!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries --><script>var firebaseConfig={apiKey:"AIzaSyBCf6ie1SYSt1u3RNSuwOc2N4Ld-m3C6zA",authDomain:"climb-00.firebaseapp.com",databaseURL:"https://climb-00.firebaseio.com",projectId:"climb-00",storageBucket:"climb-00.appspot.com",messagingSenderId:"735552551317",appId:"1:735552551317:web:0b3bbefcc0b17337289e9c"};firebase.initializeApp(firebaseConfig)</script></body></html>