<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="First to cross the finish line wins!"><!-- <meta property="og:title" content="Ride the Pony"> --><!-- <meta property="og:description" content="My description"> --><!-- <meta property="og:type" content="website"> --><!-- <meta property="og:image" content="https://via.placeholder.com/500"> --><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Monoton&display=fallback" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,400;0,700;1,900&display=fallback" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><!-- <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"> --><!-- <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png"> --><title>Ride the Pony</title><style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1}body{background-color:#fff;color:#333;font-family:Lato,Arial,Helvetica,sans-serif}a{color:inherit;text-decoration:none}a,button,input{font-family:Lato,Arial,Helvetica,sans-serif}button{background-color:#222;border:none;border-radius:2px;color:#fff;cursor:pointer;font-size:21px;padding:15px;width:100%}button:active{border:1px solid #333;color:#333;outline:1px solid #333}button:focus{border:1px solid #333;color:#333;outline:1px solid #333}input{box-sizing:border-box;font-family:Lato,Arial,Helvetica,sans-serif;font-size:30px;font-weight:400;margin-bottom:40px;width:100%}label{font-family:Lato,Arial,Helvetica,sans-serif;font-size:21px;font-weight:200}.hidden{display:none!important}.hide{display:none!important}.invisible{visibility:hidden}.spacer{border-bottom:1px dashed #777;margin:10px 0}.page-wrapper{margin:0 auto;max-width:1000px;padding:10px 30px}.button-wrapper{text-align:center;padding:10px 0}.container{padding-bottom:30px}.room-code{text-transform:uppercase}.bold{font-weight:700}.bold.link{font-weight:700;padding:10px 0}.header{width:100vw;text-align:center;background-color:#222;color:#fff;font-weight:200;padding:10px 0}.header h1{color:#fff;font-family:Monoton,cursive;font-size:24px;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing]{max-width:420px;margin:0 auto}[data-screen=landing] [data-input=room-code]{text-transform:uppercase}[data-screen=landing] button{color:#ff0;font-family:Monoton,cursive;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing] .game-name{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby]{font-size:20px;max-width:420px;margin:0 auto}[data-screen=lobby] button{max-width:250px}[data-screen=lobby] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby] .game-name{padding-bottom:10px}[data-group=host] [data-screen=lobby]{max-width:1000px;margin:0 auto}[data-group=host] [data-screen=lobby] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-position:right;background-size:contain;background-repeat:no-repeat}[data-group=host] [data-screen=lobby] .track{border-bottom:1px dashed #333;padding-top:20px}[data-group=host] [data-screen=lobby] .waiting{text-align:center;padding:30px 0;text-transform:uppercase}[data-group=player] [data-screen=lobby] .section-title{text-align:center;border-bottom:1px dotted #333}[data-group=player] [data-screen=lobby] .player-list .player{padding:10px;border-bottom:1px dotted #ccc}[data-group=player] [data-screen=lobby] .menu{margin-bottom:20px}[data-group=player] [data-screen=lobby] .menu table{margin:0 auto;border-collapse:collapse}[data-group=player] [data-screen=lobby] .menu td{width:100px;height:54px;border:1px solid #ccc}[data-group=player] [data-screen=lobby] .menu button{width:100%;height:100%;background-color:transparent;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:center}[data-group=player] [data-screen=lobby] .menu button[data-hue='0']{filter:hue-rotate(0)}[data-group=player] [data-screen=lobby] .menu button[data-hue='40']{filter:hue-rotate(40deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='80']{filter:hue-rotate(80deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='120']{filter:hue-rotate(120deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='160']{filter:hue-rotate(160deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='200']{filter:hue-rotate(200deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='240']{filter:hue-rotate(240deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='280']{filter:hue-rotate(280deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue='320']{filter:hue-rotate(320deg)}[data-screen=gameIntro]{max-width:1000px;margin:0 auto}[data-screen=gameIntro] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=gameIntro] .game-name{padding-bottom:10px}[data-screen=gameIntro] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:right}[data-screen=gameIntro] .tracks{margin-bottom:20px}[data-screen=gameIntro] .tracks.hot .horse{background-image:url(images/simple_cartoon_horse.gif);transition:all 1s linear}[data-screen=gameIntro] .track{border-bottom:1px dashed #333;padding-top:20px}[data-screen=gameIntro] .race-again{text-align:center}[data-screen=gameIntro] .race-again button{max-width:200px;text-transform:capitalize}</style></head><body><div class="header"><h1>tipsy.games</h1></div><div class="page-wrapper"><div class="container" data-screen="landing"><div class="game-name">Ride the Pony</div><div><label>Room Code</label><input data-input="room-code" type="text" placeholder="AAAA"></div><div><label>Player Name</label><input data-input="player-name" type="text" placeholder="guest"></div><div class="button-wrapper"><button data-action="joinGame">Join Game</button></div><div class="spacer"></div><div class="button-wrapper"><button data-action="newGame">New Game</button></div></div><div data-group="host"><div class="container hidden" data-screen="lobby"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div></div><div class="tracks"></div><div class="waiting">waiting for players to join</div><div class="start-game-wrapper"><div class="button-wrapper hide"><button data-action="startGame">Start Race</button></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="countdown bold"></div><div class="leader bold hide">GO</div></div></div><div class="tracks"></div><div class="race-again hide"><button data-action="raceAgain">race again</button></div></div></div></div><div data-group="player"><div class="container hidden" data-screen="lobby"><div data-group="player"><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div><div class="menu"><table><tbody><tr><td><button data-hue="0" data-action="selectPony"></button></td><td><button data-hue="40" data-action="selectPony"></button></td><td><button data-hue="80" data-action="selectPony"></button></td></tr><tr><td><button data-hue="120" data-action="selectPony"></button></td><td><button data-hue="160" data-action="selectPony"></button></td><td><button data-hue="200" data-action="selectPony"></button></td></tr><tr><td><button data-hue="240" data-action="selectPony"></button></td><td><button data-hue="280" data-action="selectPony"></button></td><td><button data-hue="320" data-action="selectPony"></button></td></tr></tbody></table></div><div><div class="section-title">Player List</div><div class="player-list"></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div>The Player's Game</div></div></div></div><script>!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){var t={exports:{}};return e(t,t.exports),t.exports}var r=function(e){return e&&e.Math==Math&&e},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),o=function(e){try{return!!e()}catch(e){return!0}},a=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),i={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,u=c&&!i.call({1:2},1),l=u?function(e){var t=c(this,e);return!!t&&t.enumerable}:i,s={f:l},f=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},p={}.toString,h=function(e){return p.call(e).slice(8,-1)},d="".split,y=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==h(e)?d.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return y(v(e))},m=function(e){return"object"==typeof e?null!==e:"function"==typeof e},b=function(e,t){if(!m(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!m(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!m(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!m(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},w={}.hasOwnProperty,x=function(e,t){return w.call(e,t)},S=n.document,L=m(S)&&m(S.createElement),E=function(e){return L?S.createElement(e):{}},O=!a&&!o((function(){return 7!=Object.defineProperty(E("div"),"a",{get:function(){return 7}}).a})),T=Object.getOwnPropertyDescriptor,k=a?T:function(e,t){if(e=g(e),t=b(t,!0),O)try{return T(e,t)}catch(e){}if(x(e,t))return f(!s.f.call(e,t),e[t])},R={f:k},j=function(e){if(!m(e))throw TypeError(String(e)+" is not an object");return e},I=Object.defineProperty,A=a?I:function(e,t,r){if(j(e),t=b(t,!0),j(r),O)try{return I(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e},N={f:A},P=a?function(e,t,r){return N.f(e,t,f(1,r))}:function(e,t,r){return e[t]=r,e},M=function(e,t){try{P(n,e,t)}catch(r){n[e]=t}return t},_="__core-js_shared__",C=n[_]||M(_,{}),q=C,G=Function.toString;"function"!=typeof q.inspectSource&&(q.inspectSource=function(e){return G.call(e)});var D,F,U,H=q.inspectSource,V=n.WeakMap,K="function"==typeof V&&/native code/.test(H(V)),$=t((function(e){(e.exports=function(e,t){return q[e]||(q[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})})),J=0,Y=Math.random(),B=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++J+Y).toString(36)},z=$("keys"),W=function(e){return z[e]||(z[e]=B(e))},X={},Q=n.WeakMap,Z=function(e){return U(e)?F(e):D(e,{})},ee=function(e){return function(t){var r;if(!m(t)||(r=F(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}};if(K){var te=q.state||(q.state=new Q),re=te.get,ne=te.has,oe=te.set;D=function(e,t){return t.facade=e,oe.call(te,e,t),t},F=function(e){return re.call(te,e)||{}},U=function(e){return ne.call(te,e)}}else{var ae=W("state");X[ae]=!0,D=function(e,t){return t.facade=e,P(e,ae,t),t},F=function(e){return x(e,ae)?e[ae]:{}},U=function(e){return x(e,ae)}}var ie={set:D,get:F,has:U,enforce:Z,getterFor:ee},ce=t((function(e){var t=ie.get,r=ie.enforce,o=String(String).split("String");(e.exports=function(e,t,a,i){var c,u=!!i&&!!i.unsafe,l=!!i&&!!i.enumerable,s=!!i&&!!i.noTargetGet;"function"==typeof a&&("string"!=typeof t||x(a,"name")||P(a,"name",t),(c=r(a)).source||(c.source=o.join("string"==typeof t?t:""))),e!==n?(u?!s&&e[t]&&(l=!0):delete e[t],l?e[t]=a:P(e,t,a)):l?e[t]=a:M(t,a)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||H(this)}))})),ue=n,le=function(e){return"function"==typeof e?e:void 0},se=function(e,t){return arguments.length<2?le(ue[e])||le(n[e]):ue[e]&&ue[e][t]||n[e]&&n[e][t]},fe=Math.ceil,pe=Math.floor,he=function(e){return isNaN(e=+e)?0:(e>0?pe:fe)(e)},de=Math.min,ye=function(e){return e>0?de(he(e),9007199254740991):0},ve=Math.max,ge=Math.min,me=function(e,t){var r=he(e);return r<0?ve(r+t,0):ge(r,t)},be=function(e){return function(t,r,n){var o,a=g(t),i=ye(a.length),c=me(n,i);if(e&&r!=r){for(;i>c;)if((o=a[c++])!=o)return!0}else for(;i>c;c++)if((e||c in a)&&a[c]===r)return e||c||0;return!e&&-1}},we={includes:be(!0),indexOf:be(!1)},xe=we.indexOf,Se=function(e,t){var r,n=g(e),o=0,a=[];for(r in n)!x(X,r)&&x(n,r)&&a.push(r);for(;t.length>o;)x(n,r=t[o++])&&(~xe(a,r)||a.push(r));return a},Le=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ee=Le.concat("length","prototype"),Oe=Object.getOwnPropertyNames||function(e){return Se(e,Ee)},Te={f:Oe},ke=Object.getOwnPropertySymbols,Re={f:ke},je=se("Reflect","ownKeys")||function(e){var t=Te.f(j(e)),r=Re.f;return r?t.concat(r(e)):t},Ie=function(e,t){for(var r=je(t),n=N.f,o=R.f,a=0;a<r.length;a++){var i=r[a];x(e,i)||n(e,i,o(t,i))}},Ae=/#|\.prototype\./,Ne=function(e,t){var r=Me[Pe(e)];return r==Ce||r!=_e&&("function"==typeof t?o(t):!!t)},Pe=Ne.normalize=function(e){return String(e).replace(Ae,".").toLowerCase()},Me=Ne.data={},_e=Ne.NATIVE="N",Ce=Ne.POLYFILL="P",qe=Ne,Ge=R.f,De=function(e,t){var r,o,a,i,c,u=e.target,l=e.global,s=e.stat;if(r=l?n:s?n[u]||M(u,{}):(n[u]||{}).prototype)for(o in t){if(i=t[o],a=e.noTargetGet?(c=Ge(r,o))&&c.value:r[o],!qe(l?o:u+(s?".":"#")+o,e.forced)&&void 0!==a){if(typeof i==typeof a)continue;Ie(i,a)}(e.sham||a&&a.sham)&&P(i,"sham",!0),ce(r,o,i,e)}};De({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});t((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new L(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function f(){}function p(){}function h(){}var d={};d[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==t&&r.call(v,o)&&(d=v);var g=h.prototype=f.prototype=Object.create(d);function m(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,c){var u=l(e[o],e,a);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=g.constructor=h,h.constructor=p,p.displayName=c(h,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(b.prototype),b.prototype[a]=function(){return this},e.AsyncIterator=b,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new b(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},m(g),c(g,i,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function Fe(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Fe(a,n,o,i,c,"next",e)}function c(e){Fe(a,n,o,i,c,"throw",e)}i(void 0)}))}}function He(e){return Ve(e)||Ke(e)||$e(e)||Ye()}function Ve(e){if(Array.isArray(e))return Je(e)}function Ke(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function $e(e,t){if(e){if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(e,t):void 0}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ye(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Be=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},ze=function(e,t,r){if(Be(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}},We=function(e){return Object(v(e))},Xe=Array.isArray||function(e){return"Array"==h(e)},Qe=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Ze=Qe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=$("wks"),tt=n.Symbol,rt=Ze?tt:tt&&tt.withoutSetter||B,nt=function(e){return x(et,e)||(Qe&&x(tt,e)?et[e]=tt[e]:et[e]=rt("Symbol."+e)),et[e]},ot=nt("species"),at=function(e,t){var r;return Xe(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Xe(r.prototype)?m(r)&&null===(r=r[ot])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},it=[].push,ct=function(e){var t=1==e,r=2==e,n=3==e,o=4==e,a=6==e,i=7==e,c=5==e||a;return function(u,l,s,f){for(var p,h,d=We(u),v=y(d),g=ze(l,s,3),m=ye(v.length),b=0,w=f||at,x=t?w(u,m):r||i?w(u,0):void 0;m>b;b++)if((c||b in v)&&(h=g(p=v[b],b,d),e))if(t)x[b]=h;else if(h)switch(e){case 3:return!0;case 5:return p;case 6:return b;case 2:it.call(x,p)}else switch(e){case 4:return!1;case 7:it.call(x,p)}return a?-1:n||o?o:x}},ut={forEach:ct(0),map:ct(1),filter:ct(2),some:ct(3),every:ct(4),find:ct(5),findIndex:ct(6),filterOut:ct(7)},lt=function(e,t){var r=[][e];return!!r&&o((function(){r.call(null,t||function(){throw 1},1)}))},st=Object.defineProperty,ft={},pt=function(e){throw e},ht=function(e,t){if(x(ft,e))return ft[e];t||(t={});var r=[][e],n=!!x(t,"ACCESSORS")&&t.ACCESSORS,i=x(t,0)?t[0]:pt,c=x(t,1)?t[1]:void 0;return ft[e]=!!r&&!o((function(){if(n&&!a)return!0;var e={length:-1};n?st(e,1,{enumerable:!0,get:pt}):e[1]=1,r.call(e,i,c)}))},dt=ut.forEach,yt=lt("forEach"),vt=ht("forEach"),gt=yt&&vt?[].forEach:function(e){return dt(this,e,arguments.length>1?arguments[1]:void 0)};De({target:"Array",proto:!0,forced:[].forEach!=gt},{forEach:gt});var mt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var bt in mt){var wt=n[bt],xt=wt&&wt.prototype;if(xt&&xt.forEach!==gt)try{P(xt,"forEach",gt)}catch(e){xt.forEach=gt}}function St(e){console.log("display screen:",e),document.querySelectorAll("[data-screen]").forEach((function(e){e.classList.add("hidden")})),document.querySelector('[data-screen="'.concat(e,'"]')).classList.remove("hidden"),window.app.screen=e}var Lt,Et,Ot=function(e,t,r){var n=b(t);n in e?N.f(e,n,f(0,r)):e[n]=r},Tt=se("navigator","userAgent")||"",kt=n.process,Rt=kt&&kt.versions,jt=Rt&&Rt.v8;jt?Et=(Lt=jt.split("."))[0]+Lt[1]:Tt&&(!(Lt=Tt.match(/Edge\/(\d+)/))||Lt[1]>=74)&&(Lt=Tt.match(/Chrome\/(\d+)/))&&(Et=Lt[1]);var It=Et&&+Et,At=nt("species"),Nt=function(e){return It>=51||!o((function(){var t=[];return(t.constructor={})[At]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Pt=nt("isConcatSpreadable"),Mt=9007199254740991,_t="Maximum allowed index exceeded",Ct=It>=51||!o((function(){var e=[];return e[Pt]=!1,e.concat()[0]!==e})),qt=Nt("concat"),Gt=function(e){if(!m(e))return!1;var t=e[Pt];return void 0!==t?!!t:Xe(e)},Dt=!Ct||!qt;De({target:"Array",proto:!0,forced:Dt},{concat:function(e){var t,r,n,o,a,i=We(this),c=at(i,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(Gt(a=-1===t?i:arguments[t])){if(u+(o=ye(a.length))>Mt)throw TypeError(_t);for(r=0;r<o;r++,u++)r in a&&Ot(c,u,a[r])}else{if(u>=Mt)throw TypeError(_t);Ot(c,u++,a)}return c.length=u,c}});var Ft=[].join,Ut=y!=Object,Ht=lt("join",",");De({target:"Array",proto:!0,forced:Ut||!Ht},{join:function(e){return Ft.call(g(this),void 0===e?",":e)}});var Vt=ut.map,Kt=Nt("map"),$t=ht("map");De({target:"Array",proto:!0,forced:!Kt||!$t},{map:function(e){return Vt(this,e,arguments.length>1?arguments[1]:void 0)}});var Jt=Object.keys||function(e){return Se(e,Le)},Yt=o((function(){Jt(1)}));function Bt(){console.log("render the lobby");var e=window.app.host,t=e.code,r=e.playerList;t&&Xt(t),Wt(r),zt(r,2),console.log("beginning to render the lobby")}function zt(e,t){var r=Object.keys(e).length,n=document.querySelector('[data-screen="lobby"] button[data-action="startGame"]').parentNode;r<t?n.classList.add("hide"):n.classList.remove("hide")}function Wt(e){console.log("update player list",e);var t=Object.keys(e).map((function(t){var r=e[t],n=r.playerName,o=r.hue;return'<div class="track"><div class="horse" style="filter: hue-rotate('.concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="lobby"] .tracks').innerHTML=t}function Xt(e){document.querySelector('[data-screen="lobby"] .room-code').innerText=e}De({target:"Object",stat:!0,forced:Yt},{keys:function(e){return Jt(We(e))}});var Qt=ut.filter,Zt=Nt("filter"),er=ht("filter");function tr(){var e=window.app,t=e.host,r=e.player;return t&&t.ref?t.ref:r&&r.ref?r.ref:void 0}De({target:"Array",proto:!0,forced:!Zt||!er},{filter:function(e){return Qt(this,e,arguments.length>1?arguments[1]:void 0)}});var rr,nr="",or=!0,ar=!0;function ir(){console.log("render game intro"),ar&&(ar=!1,nr=document.querySelector('[data-screen="gameIntro"]').innerHTML),cr()}function cr(){return ur.apply(this,arguments)}function ur(){return(ur=Ue(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(or){e.next=2;break}return e.abrupt("return");case 2:or=!1,document.querySelector('[data-screen="gameIntro"]').innerHTML=nr,vr(),lr();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lr(){return sr.apply(this,arguments)}function sr(){return(sr=Ue(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(Date.now()/1e3)+10,rr=gr(),r=tr(),e.next=5,r.update({outcome:JSON.stringify(rr),race_time:t}).then((function(){fr(t)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e){var t=Math.floor(Date.now()/1e3),r=e-t;r<=0?pr():(document.querySelector('[data-screen="gameIntro"] .countdown').innerHTML=r,setTimeout((function(){fr(e)}),1e3))}function pr(){console.log("start race!!"),document.querySelector('[data-screen="gameIntro"] .countdown').classList.add("hide"),document.querySelector('[data-screen="gameIntro"] .leader').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .tracks').classList.add("hot"),hr()}function hr(){console.log("move horses:",rr);var e=0,t=yr(rr),r=setInterval((function(){console.log("move horses",e);var n=rr.map((function(e){return e.frame})).sort((function(e,t){return e-t}));console.log("frames:",n);for(var o=0;o<rr.length;o++){var a=rr[o].distances,i=document.querySelector('[data-screen="gameIntro"] .track[data-key="'.concat(rr[o].player,'"] .horse'));console.log("distance",a[e]),e>=n[0]?dr(i,40):dr(i,a[e])}e>=n[0]+1&&(clearInterval(r),setTimeout((function(){document.querySelector('[data-screen="gameIntro"] .tracks').classList.remove("hot"),document.querySelector('[data-screen="gameIntro"] .race-again').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .leader').innerHTML="winner: ".concat(t),or=!0}),1e3)),e+=1}),1e3)}function dr(e,t){console.log("move horse:",e,t),e.style.marginLeft="".concat(parseInt(e.style.marginLeft,10)+t,"px")}function yr(e){var t=e.sort((function(e,t){return e.frame-t.frame})),r=t.filter((function(e){return e.frame===t[0].frame})).sort((function(e,t){return e.steps-t.steps}))[0];console.log("==== GET WINNER ",r);var n=window.app.host.playerList[r.player].playerName;return console.log("==== PLAYER NAME ",n),n}function vr(){var e=app.host.playerList;console.log("update player list",e);var t=Object.keys(e).map((function(t){var r=e[t],n=r.playerName,o=r.hue;return'<div class="track" data-key='.concat(t,'><div class="horse" style="margin-left: -100px; filter: hue-rotate(').concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="gameIntro"] .tracks').innerHTML=t}function gr(){var e=window.app.host.playerList;return Object.keys(e).map((function(e){for(var t=[],r=0,n=0,o=0,a=0;a<100;a++){var i=mr(30,40);if(r+i>=960){n=a,o=960-r;break}t.push(i),r+=i}return{distances:t,frame:n,player:e,steps:o}}))}function mr(e,t){return Math.floor(Math.random()*(t-e+1))+e}var br={gameIntro:ir,lobby:Bt};function wr(){console.log("render the lobby");var e=window.app.player,t=e.code,r=e.playerList;t&&Sr(t),r&&xr(r),console.log("beginning to render the lobby")}function xr(e){console.log("update player list",e),document.querySelector('[data-screen="lobby"] .player-list').innerHTML=Object.keys(e).map((function(t){return'<div class="player">'.concat(e[t].playerName,"</div>")})).join("")}function Sr(e){document.querySelector('[data-screen="lobby"] .room-code').innerText=e}var Lr=function(){console.log("render game intro")},Er={lobby:wr,gameIntro:Lr},Or=arguments,Tr=[],kr=function(){Tr.push.apply(Tr,He(Or))},Rr=function(){window.console.log(Tr.join("\n"))};function jr(e){return Ir.apply(this,arguments)}function Ir(){return(Ir=Ue(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.playerType,n=t.screen,kr(),o={host:br,player:Er},e.next=5,o[r][n];case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}o[r][n]();case 8:St(n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e){console.log("on player list updated",e),window.app.player.playerList=e.exists()?e.toJSON():{},jr({playerType:"player",screen:"lobby"})}var Nr=function(e){kr();var t=e.exists()?e.toJSON():"";t&&jr({playerType:"player",screen:t})},Pr=function(){var e=j(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Mr(e,t){return RegExp(e,t)}var _r,Cr,qr=o((function(){var e=Mr("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Gr=o((function(){var e=Mr("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Dr={UNSUPPORTED_Y:qr,BROKEN_CARET:Gr},Fr=RegExp.prototype.exec,Ur=String.prototype.replace,Hr=Fr,Vr=(_r=/a/,Cr=/b*/g,Fr.call(_r,"a"),Fr.call(Cr,"a"),0!==_r.lastIndex||0!==Cr.lastIndex),Kr=Dr.UNSUPPORTED_Y||Dr.BROKEN_CARET,$r=void 0!==/()??/.exec("")[1],Jr=Vr||$r||Kr;Jr&&(Hr=function(e){var t,r,n,o,a=this,i=Kr&&a.sticky,c=Pr.call(a),u=a.source,l=0,s=e;return i&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),s=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(u="(?: "+u+")",s=" "+s,l++),r=new RegExp("^(?:"+u+")",c)),$r&&(r=new RegExp("^"+u+"$(?!\\s)",c)),Vr&&(t=a.lastIndex),n=Fr.call(i?r:a,s),i?n?(n.input=n.input.slice(l),n[0]=n[0].slice(l),n.index=a.lastIndex,a.lastIndex+=n[0].length):a.lastIndex=0:Vr&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),$r&&n&&n.length>1&&Ur.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var Yr=Hr;De({target:"RegExp",proto:!0,forced:/./.exec!==Yr},{exec:Yr});var Br=nt("species"),zr=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Wr="$0"==="a".replace(/./,"$0"),Xr=nt("replace"),Qr=!!/./[Xr]&&""===/./[Xr]("a","$0"),Zr=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),en=function(e,t,r,n){var a=nt(e),i=!o((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),c=i&&!o((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[Br]=function(){return r},r.flags="",r[a]=/./[a]),r.exec=function(){return t=!0,null},r[a](""),!t}));if(!i||!c||"replace"===e&&(!zr||!Wr||Qr)||"split"===e&&!Zr){var u=/./[a],l=r(a,""[e],(function(e,t,r,n,o){return t.exec===Yr?i&&!o?{done:!0,value:u.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:Wr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Qr}),s=l[0],f=l[1];ce(String.prototype,e,s),ce(RegExp.prototype,a,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)})}n&&P(RegExp.prototype[a],"sham",!0)},tn=nt("match"),rn=function(e){var t;return m(e)&&(void 0!==(t=e[tn])?!!t:"RegExp"==h(e))},nn=nt("species"),on=function(e,t){var r,n=j(e).constructor;return void 0===n||null==(r=j(n)[nn])?t:Be(r)},an=function(e){return function(t,r){var n,o,a=String(v(t)),i=he(r),c=a.length;return i<0||i>=c?e?"":void 0:(n=a.charCodeAt(i))<55296||n>56319||i+1===c||(o=a.charCodeAt(i+1))<56320||o>57343?e?a.charAt(i):n:e?a.slice(i,i+2):o-56320+(n-55296<<10)+65536}},cn={codeAt:an(!1),charAt:an(!0)},un=cn.charAt,ln=function(e,t,r){return t+(r?un(e,t).length:1)},sn=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==h(e))throw TypeError("RegExp#exec called on incompatible receiver");return Yr.call(e,t)},fn=[].push,pn=Math.min,hn=4294967295,dn=!o((function(){return!RegExp(hn,"y")}));function yn(e){var t=decodeURIComponent(document.cookie).split("; ").map((function(e){return e.split(/=/)})).filter((function(t){return t[0]===e}));return t.length?t[0][1]:""}function vn(e,t){try{document.cookie="".concat(e,"=").concat(t)}catch(e){console.error("tried to cache data in a cookie:",e)}}function gn(e){return mn.apply(this,arguments)}function mn(){return(mn=Ue(regeneratorRuntime.mark((function e(t){var r,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,console.log("new player"),n=window.firebase.database().ref("rooms/".concat(r)),o="",a="",i=bn(),"0",vn("playerName",i),e.next=10,n.child("players").push({playerName:i,hue:"0"}).then((function(e){console.log("player set"),o=e.getKey(),n.child("players").child(o).onDisconnect().remove(),console.log("display lobby"),St("lobby")}));case 10:return e.abrupt("return",{code:r,listen:wn,playerKey:o,playerList:a,ref:n});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(){return console.log("get player name"),document.querySelector('[data-input="player-name"]').value||"guest"}function wn(){console.log("listening");var e=window.app.player.ref;e.child("players").on("value",Ar),e.child("screen").on("value",Nr)}en("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(v(this)),o=void 0===r?hn:r>>>0;if(0===o)return[];if(void 0===e)return[n];if(!rn(e))return t.call(n,e,o);for(var a,i,c,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),s=0,f=new RegExp(e.source,l+"g");(a=Yr.call(f,n))&&!((i=f.lastIndex)>s&&(u.push(n.slice(s,a.index)),a.length>1&&a.index<n.length&&fn.apply(u,a.slice(1)),c=a[0].length,s=i,u.length>=o));)f.lastIndex===a.index&&f.lastIndex++;return s===n.length?!c&&f.test("")||u.push(""):u.push(n.slice(s)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var o=v(this),a=null==t?void 0:t[e];return void 0!==a?a.call(t,o,r):n.call(String(o),t,r)},function(e,o){var a=r(n,e,this,o,n!==t);if(a.done)return a.value;var i=j(e),c=String(this),u=on(i,RegExp),l=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(dn?"y":"g"),f=new u(dn?i:"^(?:"+i.source+")",s),p=void 0===o?hn:o>>>0;if(0===p)return[];if(0===c.length)return null===sn(f,c)?[c]:[];for(var h=0,d=0,y=[];d<c.length;){f.lastIndex=dn?d:0;var v,g=sn(f,dn?c:c.slice(d));if(null===g||(v=pn(ye(f.lastIndex+(dn?0:d)),c.length))===h)d=ln(c,d,l);else{if(y.push(c.slice(h,d)),y.length===p)return y;for(var m=1;m<=g.length-1;m++)if(y.push(g[m]),y.length===p)return y;d=h=v}}return y.push(c.slice(h)),y}]}),!dn);var xn={displayLog:Rr},Sn=!0,Ln=function(){return kr(),document.querySelector('[data-input="room-code"]').value.toLowerCase()},En=function(){var e=Ue(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sn){e.next=2;break}return e.abrupt("return");case 2:if(!window.app.player){e.next=5;break}return e.abrupt("return");case 5:return Sn=!1,t=Ln(),r=window.firebase.database().ref("rooms/".concat(t)),n=!1,e.next=11,r.once("value").then((function(e){"lobby"===(e.toJSON()||{}).screen?n=!0:Sn=!0}));case 11:if(!n){e.next=17;break}return document.querySelector('[data-group="host"]').remove(),e.next=15,new gn({code:t});case 15:xn.player=e.sent,xn.player.listen();case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),On=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function Tn(){for(var e=[],t=0;t<4;t++)e[t]=kn(On);return e.join("")}function kn(e){return e[Math.floor(Math.random()*e.length)]}function Rn(e){console.log("on player list updated",e),window.app.host.playerList=e.exists()?e.toJSON():{},jr({playerType:"host",screen:"lobby"})}function jn(){return In.apply(this,arguments)}function In(){return(In=Ue(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new host"),t=Tn(),r=window.firebase.database().ref("rooms/".concat(t)),console.log("ref:",r),n="",e.next=7,r.onDisconnect().remove();case 7:return console.log("ref set lobby"),e.next=10,r.set({screen:"lobby"});case 10:return e.abrupt("return",{code:t,listen:An,playerList:n,ref:r});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function An(){console.log("listening"),window.app.host.ref.child("players").on("value",Rn)}var Nn=!0;function Pn(){return Mn.apply(this,arguments)}function Mn(){return(Mn=Ue(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.app.host){e.next=3;break}return e.abrupt("return");case 3:if(!Nn){e.next=11;break}return Nn=!1,document.querySelector('[data-group="player"]').remove(),e.next=8,new jn;case 8:xn.host=e.sent,xn.host.listen(),jr({playerType:"host",screen:"lobby"});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(e){return Cn.apply(this,arguments)}function Cn(){return(Cn=Ue(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tr(),e.next=3,r.update({screen:t}).then((function(){jr({screen:t,playerType:"host"})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qn(){return Gn.apply(this,arguments)}function Gn(){return(Gn=Ue(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("start game"),"gameIntro"!==window.app.screen&&_n("gameIntro");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Dn=!0;function Fn(e){return Un.apply(this,arguments)}function Un(){return(Un=Ue(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dn){e.next=2;break}return e.abrupt("return");case 2:return r=t.target.dataset.hue,Dn=!1,n=tr(),o=window.app.player.playerKey,e.next=8,n.child("players").child(o).update({hue:r}).then((function(){console.log("hue is set:",r),Dn=!0}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hn(){console.log("race again"),_n("lobby")}var Vn={joinGame:En,newGame:Pn,startGame:qn,selectPony:Fn,raceAgain:Hn};function Kn(e){console.log("clicked:",e);var t=e.target.dataset.action||"";Vn[t]&&Vn[t](e)}var $n=function(){kr(),document.addEventListener("click",Kn,!1)},Jn=function(){kr();var e=yn("playerName");e&&(document.querySelector('[data-input="player-name"]').value=e)},Yn=function(){kr(),window.app=xn,Jn(),$n()};window.addEventListener("load",Yn)}()</script><!-- The core Firebase JS SDK is always required and must be listed first --><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script><!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries --><script>var firebaseConfig={apiKey:"AIzaSyBCf6ie1SYSt1u3RNSuwOc2N4Ld-m3C6zA",authDomain:"climb-00.firebaseapp.com",databaseURL:"https://climb-00.firebaseio.com",projectId:"climb-00",storageBucket:"climb-00.appspot.com",messagingSenderId:"735552551317",appId:"1:735552551317:web:0b3bbefcc0b17337289e9c"};firebase.initializeApp(firebaseConfig)</script></body></html>