<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="description" content="First to cross the finish line wins!"><!-- <meta property="og:title" content="Ride the Pony"> --><!-- <meta property="og:description" content="My description"> --><!-- <meta property="og:type" content="website"> --><!-- <meta property="og:image" content="https://via.placeholder.com/500"> --><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=Monoton&display=fallback" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,400;0,700;1,900&display=fallback" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><!-- <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"> --><!-- <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png"> --><title>Ride the Pony</title><style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}body{line-height:1}body{background-color:#fff;color:#333;font-family:Lato,Arial,Helvetica,sans-serif}a{color:inherit;text-decoration:none}a,button,input{font-family:Lato,Arial,Helvetica,sans-serif}button{background-color:#222;border:none;border-radius:2px;color:#fff;cursor:pointer;font-size:21px;padding:15px;width:100%}button:active{border:1px solid #333;color:#333;outline:1px solid #333}button:focus{border:1px solid #333;color:#333;outline:1px solid #333}input{box-sizing:border-box;font-family:Lato,Arial,Helvetica,sans-serif;font-size:30px;font-weight:400;margin-bottom:40px;width:100%}label{font-family:Lato,Arial,Helvetica,sans-serif;font-size:21px;font-weight:200}.hidden{display:none!important}.hide{display:none!important}.invisible{visibility:hidden}.spacer{border-bottom:1px dashed #777;margin:10px 0}.page-wrapper{margin:0 auto;max-width:1000px;padding:10px 30px}.button-wrapper{text-align:center;padding:10px 0}.container{padding-bottom:30px}.room-code{text-transform:uppercase}.bold{font-weight:700}.bold.link{font-weight:700;padding:10px 0}.header{width:100vw;text-align:center;background-color:#222;color:#fff;font-weight:200;padding:10px 0}.header h1{color:#fff;font-family:Monoton,cursive;font-size:24px;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing]{max-width:420px;margin:0 auto}[data-screen=landing] [data-input=room-code]{text-transform:uppercase}[data-screen=landing] button{color:#ff0;font-family:Monoton,cursive;font-weight:400;letter-spacing:2px;text-shadow:1px 2px #000;text-transform:uppercase}[data-screen=landing] .game-name{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby]{font-size:20px;max-width:420px;margin:0 auto}[data-screen=lobby] button{max-width:250px}[data-screen=lobby] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=lobby] .game-name{padding-bottom:10px}[data-group=host] [data-screen=lobby]{max-width:1000px;margin:0 auto}[data-group=host] [data-screen=lobby] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-position:right;background-size:contain;background-repeat:no-repeat}[data-group=host] [data-screen=lobby] .track{border-bottom:1px dashed #333;padding-top:20px}[data-group=host] [data-screen=lobby] .waiting{text-align:center;padding:30px 0;text-transform:uppercase}[data-group=player] [data-screen=lobby] .section-title{text-align:center;border-bottom:1px dotted #333}[data-group=player] [data-screen=lobby] .player-list .player{padding:10px;border-bottom:1px dotted #ccc}[data-group=player] [data-screen=lobby] .menu{margin-bottom:20px}[data-group=player] [data-screen=lobby] .menu table{margin:0 auto;border-collapse:collapse}[data-group=player] [data-screen=lobby] .menu td{width:100px;height:54px;border:1px solid #ccc}[data-group=player] [data-screen=lobby] .menu button{width:100%;height:100%;background-color:transparent;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:center}[data-group=player] [data-screen=lobby] .menu button[data-hue="0"]{filter:hue-rotate(0)}[data-group=player] [data-screen=lobby] .menu button[data-hue="40"]{filter:hue-rotate(40deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="80"]{filter:hue-rotate(80deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="120"]{filter:hue-rotate(120deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="160"]{filter:hue-rotate(160deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="200"]{filter:hue-rotate(200deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="240"]{filter:hue-rotate(240deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="280"]{filter:hue-rotate(280deg)}[data-group=player] [data-screen=lobby] .menu button[data-hue="320"]{filter:hue-rotate(320deg)}[data-screen=gameIntro]{max-width:1000px;margin:0 auto}[data-screen=gameIntro] .game-info{text-align:center;padding:10px;border:1px dashed #ccc;margin-bottom:20px;font-weight:400;font-size:18px}[data-screen=gameIntro] .game-name{padding-bottom:10px}[data-screen=gameIntro] .horse{height:54px;width:100px;margin-left:-100px;background-image:url(images/horse_still_frame.png);background-size:contain;background-repeat:no-repeat;background-position:right}[data-screen=gameIntro] .tracks{margin-bottom:20px}[data-screen=gameIntro] .tracks.hot .horse{background-image:url(images/simple_cartoon_horse.gif);transition:all 1s linear}[data-screen=gameIntro] .track{border-bottom:1px dashed #333;padding-top:20px}[data-screen=gameIntro] .race-again{text-align:center}[data-screen=gameIntro] .race-again button{max-width:200px;text-transform:capitalize}</style></head><body><div class="header"><h1>tipsy.games</h1></div><div class="page-wrapper"><div class="container" data-screen="landing"><div class="game-name">Ride the Pony</div><div><label>Room Code</label><input data-input="room-code" type="text" placeholder="AAAA"></div><div><label>Player Name</label><input data-input="player-name" type="text" placeholder="guest"></div><div class="button-wrapper"><button data-action="joinGame">Join Game</button></div><div class="spacer"></div><div class="button-wrapper"><button data-action="newGame">New Game</button></div></div><div data-group="host"><div class="container hidden" data-screen="lobby"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div></div><div class="tracks"></div><div class="waiting">waiting for players to join</div><div class="start-game-wrapper"><div class="button-wrapper hide"><button data-action="startGame">Start Race</button></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div data-group="host"><div><div class="game-info"><div class="game-name">Ride the Pony</div><div class="countdown bold"></div><div class="leader bold hide">GO</div></div></div><div class="tracks"></div><div class="race-again hide"><button data-action="raceAgain">race again</button></div></div></div></div><div data-group="player"><div class="container hidden" data-screen="lobby"><div data-group="player"><div class="game-info"><div class="game-name">Ride the Pony</div><div class="room-code bold"></div></div><div class="menu"><table><tbody><tr><td><button data-hue="0" data-action="selectPony"></button></td><td><button data-hue="40" data-action="selectPony"></button></td><td><button data-hue="80" data-action="selectPony"></button></td></tr><tr><td><button data-hue="120" data-action="selectPony"></button></td><td><button data-hue="160" data-action="selectPony"></button></td><td><button data-hue="200" data-action="selectPony"></button></td></tr><tr><td><button data-hue="240" data-action="selectPony"></button></td><td><button data-hue="280" data-action="selectPony"></button></td><td><button data-hue="320" data-action="selectPony"></button></td></tr></tbody></table></div><div><div class="section-title">Player List</div><div class="player-list"></div></div></div></div><div class="container hidden" data-screen="gameIntro"><div>The Player's Game</div></div></div></div><script>!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var r=function(e){return e&&e.Math==Math&&e},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),o=function(e){try{return!!e()}catch(e){return!0}},i=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,u={f:c&&!a.call({1:2},1)?function(e){var t=c(this,e);return!!t&&t.enumerable}:a},l=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},s={}.toString,f=function(e){return s.call(e).slice(8,-1)},p="".split,d=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==f(e)?p.call(e,""):Object(e)}:Object,h=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},y=function(e){return d(h(e))},v=function(e){return"object"==typeof e?null!==e:"function"==typeof e},g=function(e,t){if(!v(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!v(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!v(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!v(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,w=function(e,t){return m.call(e,t)},b=n.document,x=v(b)&&v(b.createElement),S=!i&&!o((function(){return 7!=Object.defineProperty((e="div",x?b.createElement(e):{}),"a",{get:function(){return 7}}).a;var e})),E=Object.getOwnPropertyDescriptor,L={f:i?E:function(e,t){if(e=y(e),t=g(t,!0),S)try{return E(e,t)}catch(e){}if(w(e,t))return l(!u.f.call(e,t),e[t])}},O=function(e){if(!v(e))throw TypeError(String(e)+" is not an object");return e},T=Object.defineProperty,I={f:i?T:function(e,t,r){if(O(e),t=g(t,!0),O(r),S)try{return T(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},k=i?function(e,t,r){return I.f(e,t,l(1,r))}:function(e,t,r){return e[t]=r,e},R=function(e,t){try{k(n,e,t)}catch(r){n[e]=t}return t},j=n["__core-js_shared__"]||R("__core-js_shared__",{}),N=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(e){return N.call(e)});var P,M,A,_,q=j.inspectSource,C=n.WeakMap,D="function"==typeof C&&/native code/.test(q(C)),G=t((function(e){(e.exports=function(e,t){return j[e]||(j[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),F=0,H=Math.random(),U=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++F+H).toString(36)},J=G("keys"),V={},K=n.WeakMap;if(D){var $=new K,Y=$.get,B=$.has,z=$.set;P=function(e,t){return z.call($,e,t),t},M=function(e){return Y.call($,e)||{}},A=function(e){return B.call($,e)}}else{var W=J[_="state"]||(J[_]=U(_));V[W]=!0,P=function(e,t){return k(e,W,t),t},M=function(e){return w(e,W)?e[W]:{}},A=function(e){return w(e,W)}}var X={set:P,get:M,has:A,enforce:function(e){return A(e)?M(e):P(e,{})},getterFor:function(e){return function(t){var r;if(!v(t)||(r=M(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}},Q=t((function(e){var t=X.get,r=X.enforce,o=String(String).split("String");(e.exports=function(e,t,i,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,l=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof t||w(i,"name")||k(i,"name",t),r(i).source=o.join("string"==typeof t?t:"")),e!==n?(c?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=i:k(e,t,i)):u?e[t]=i:R(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||q(this)}))})),Z=n,ee=function(e){return"function"==typeof e?e:void 0},te=function(e,t){return arguments.length<2?ee(Z[e])||ee(n[e]):Z[e]&&Z[e][t]||n[e]&&n[e][t]},re=Math.ceil,ne=Math.floor,oe=function(e){return isNaN(e=+e)?0:(e>0?ne:re)(e)},ie=Math.min,ae=function(e){return e>0?ie(oe(e),9007199254740991):0},ce=Math.max,ue=Math.min,le=function(e){return function(t,r,n){var o,i=y(t),a=ae(i.length),c=function(e,t){var r=oe(e);return r<0?ce(r+t,0):ue(r,t)}(n,a);if(e&&r!=r){for(;a>c;)if((o=i[c++])!=o)return!0}else for(;a>c;c++)if((e||c in i)&&i[c]===r)return e||c||0;return!e&&-1}},se={includes:le(!0),indexOf:le(!1)}.indexOf,fe=function(e,t){var r,n=y(e),o=0,i=[];for(r in n)!w(V,r)&&w(n,r)&&i.push(r);for(;t.length>o;)w(n,r=t[o++])&&(~se(i,r)||i.push(r));return i},pe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],de=pe.concat("length","prototype"),he={f:Object.getOwnPropertyNames||function(e){return fe(e,de)}},ye={f:Object.getOwnPropertySymbols},ve=te("Reflect","ownKeys")||function(e){var t=he.f(O(e)),r=ye.f;return r?t.concat(r(e)):t},ge=function(e,t){for(var r=ve(t),n=I.f,o=L.f,i=0;i<r.length;i++){var a=r[i];w(e,a)||n(e,a,o(t,a))}},me=/#|\.prototype\./,we=function(e,t){var r=xe[be(e)];return r==Ee||r!=Se&&("function"==typeof t?o(t):!!t)},be=we.normalize=function(e){return String(e).replace(me,".").toLowerCase()},xe=we.data={},Se=we.NATIVE="N",Ee=we.POLYFILL="P",Le=we,Oe=L.f,Te=function(e,t){var r,o,i,a,c,u=e.target,l=e.global,s=e.stat;if(r=l?n:s?n[u]||R(u,{}):(n[u]||{}).prototype)for(o in t){if(a=t[o],i=e.noTargetGet?(c=Oe(r,o))&&c.value:r[o],!Le(l?o:u+(s?".":"#")+o,e.forced)&&void 0!==i){if(typeof a==typeof i)continue;ge(a,i)}(e.sham||i&&i.sham)&&k(a,"sham",!0),Q(r,o,a,e)}},Ie=function(e){return Object(h(e))};function ke(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function Re(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ke(i,n,o,a,c,"next",e)}function c(e){ke(i,n,o,a,c,"throw",e)}a(void 0)}))}}function je(e){throw new Error('"'+e+'" is read-only')}Te({target:"Date",proto:!0,forced:o((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=Ie(this),r=g(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}}),Te({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});t((function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new E(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=b(a,r);if(c){if(c===s)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function f(){}function p(){}function d(){}var h={};h[o]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(L([])));v&&v!==t&&r.call(v,o)&&(h=v);var g=d.prototype=f.prototype=Object.create(h);function m(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){var n;this._invoke=function(o,i){function a(){return new t((function(n,a){!function n(o,i,a,c){var u=l(e[o],e,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(f).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=g.constructor=d,d.constructor=p,p.displayName=c(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},m(w.prototype),w.prototype[i]=function(){return this},e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},m(g),c(g,a,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));var Ne=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Pe=Array.isArray||function(e){return"Array"==f(e)},Me=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Ae=Me&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_e=G("wks"),qe=n.Symbol,Ce=Ae?qe:qe&&qe.withoutSetter||U,De=function(e){return w(_e,e)||(Me&&w(qe,e)?_e[e]=qe[e]:_e[e]=Ce("Symbol."+e)),_e[e]},Ge=De("species"),Fe=function(e,t){var r;return Pe(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!Pe(r.prototype)?v(r)&&null===(r=r[Ge])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)},He=[].push,Ue=function(e){var t=1==e,r=2==e,n=3==e,o=4==e,i=6==e,a=5==e||i;return function(c,u,l,s){for(var f,p,h=Ie(c),y=d(h),v=function(e,t,r){if(Ne(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}(u,l,3),g=ae(y.length),m=0,w=s||Fe,b=t?w(c,g):r?w(c,0):void 0;g>m;m++)if((a||m in y)&&(p=v(f=y[m],m,h),e))if(t)b[m]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:He.call(b,f)}else if(o)return!1;return i?-1:n||o?o:b}},Je={forEach:Ue(0),map:Ue(1),filter:Ue(2),some:Ue(3),every:Ue(4),find:Ue(5),findIndex:Ue(6)},Ve=function(e,t){var r=[][e];return!!r&&o((function(){r.call(null,t||function(){throw 1},1)}))},Ke=Object.defineProperty,$e={},Ye=function(e){throw e},Be=function(e,t){if(w($e,e))return $e[e];t||(t={});var r=[][e],n=!!w(t,"ACCESSORS")&&t.ACCESSORS,a=w(t,0)?t[0]:Ye,c=w(t,1)?t[1]:void 0;return $e[e]=!!r&&!o((function(){if(n&&!i)return!0;var e={length:-1};n?Ke(e,1,{enumerable:!0,get:Ye}):e[1]=1,r.call(e,a,c)}))},ze=Je.forEach,We=Ve("forEach"),Xe=Be("forEach"),Qe=We&&Xe?[].forEach:function(e){return ze(this,e,arguments.length>1?arguments[1]:void 0)};Te({target:"Array",proto:!0,forced:[].forEach!=Qe},{forEach:Qe});for(var Ze in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var et=n[Ze],tt=et&&et.prototype;if(tt&&tt.forEach!==Qe)try{k(tt,"forEach",Qe)}catch(e){tt.forEach=Qe}}function rt(e){console.log("display screen:",e),document.querySelectorAll("[data-screen]").forEach((function(e){e.classList.add("hidden")})),document.querySelector('[data-screen="'.concat(e,'"]')).classList.remove("hidden"),window.app.screen=e}var nt,ot,it=function(e,t,r){var n=g(t);n in e?I.f(e,n,l(0,r)):e[n]=r},at=te("navigator","userAgent")||"",ct=n.process,ut=ct&&ct.versions,lt=ut&&ut.v8;lt?ot=(nt=lt.split("."))[0]+nt[1]:at&&(!(nt=at.match(/Edge\/(\d+)/))||nt[1]>=74)&&(nt=at.match(/Chrome\/(\d+)/))&&(ot=nt[1]);var st=ot&&+ot,ft=De("species"),pt=function(e){return st>=51||!o((function(){var t=[];return(t.constructor={})[ft]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},dt=De("isConcatSpreadable"),ht=st>=51||!o((function(){var e=[];return e[dt]=!1,e.concat()[0]!==e})),yt=pt("concat"),vt=function(e){if(!v(e))return!1;var t=e[dt];return void 0!==t?!!t:Pe(e)};Te({target:"Array",proto:!0,forced:!ht||!yt},{concat:function(e){var t,r,n,o,i,a=Ie(this),c=Fe(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(vt(i=-1===t?a:arguments[t])){if(u+(o=ae(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<o;r++,u++)r in i&&it(c,u,i[r])}else{if(u>=9007199254740991)throw TypeError("Maximum allowed index exceeded");it(c,u++,i)}return c.length=u,c}});var gt=[].join,mt=d!=Object,wt=Ve("join",",");Te({target:"Array",proto:!0,forced:mt||!wt},{join:function(e){return gt.call(y(this),void 0===e?",":e)}});var bt=Je.map,xt=pt("map"),St=Be("map");Te({target:"Array",proto:!0,forced:!xt||!St},{map:function(e){return bt(this,e,arguments.length>1?arguments[1]:void 0)}});var Et=Object.keys||function(e){return fe(e,pe)};Te({target:"Object",stat:!0,forced:o((function(){Et(1)}))},{keys:function(e){return Et(Ie(e))}});var Lt=Je.filter,Ot=pt("filter"),Tt=Be("filter");Te({target:"Array",proto:!0,forced:!Ot||!Tt},{filter:function(e){return Lt(this,e,arguments.length>1?arguments[1]:void 0)}});var It=[],kt=It.sort,Rt=o((function(){It.sort(void 0)})),jt=o((function(){It.sort(null)})),Nt=Ve("sort");Te({target:"Array",proto:!0,forced:Rt||!jt||!Nt},{sort:function(e){return void 0===e?kt.call(Ie(this)):kt.call(Ie(this),Ne(e))}}),Te({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Pt=Date.prototype,Mt=Pt.toString,At=Pt.getTime;new Date(NaN)+""!="Invalid Date"&&Q(Pt,"toString",(function(){var e=At.call(this);return e==e?Mt.call(this):"Invalid Date"}));var _t="\t\n\v\f\r                　\u2028\u2029\ufeff",qt="["+_t+"]",Ct=RegExp("^"+qt+qt+"*"),Dt=RegExp(qt+qt+"*$"),Gt=function(e){return function(t){var r=String(h(t));return 1&e&&(r=r.replace(Ct,"")),2&e&&(r=r.replace(Dt,"")),r}},Ft={start:Gt(1),end:Gt(2),trim:Gt(3)}.trim,Ht=n.parseInt,Ut=/^[+-]?0[Xx]/,Jt=8!==Ht(_t+"08")||22!==Ht(_t+"0x16")?function(e,t){var r=Ft(String(e));return Ht(r,t>>>0||(Ut.test(r)?16:10))}:Ht;Te({global:!0,forced:parseInt!=Jt},{parseInt:Jt});var Vt=[].slice,Kt=function(e){return function(t,r){var n=arguments.length>2,o=n?Vt.call(arguments,2):void 0;return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,r)}};function $t(){var e=window.app,t=e.host,r=e.player;return t&&t.ref?t.ref:r&&r.ref?r.ref:void 0}Te({global:!0,bind:!0,forced:/MSIE .\./.test(at)},{setTimeout:Kt(n.setTimeout),setInterval:Kt(n.setInterval)});var Yt="",Bt=!0,zt=!0;function Wt(){return(Wt=Re(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.floor(Date.now()/1e3)+10,r=$t(),e.next=4,r.update({race_time:t}).then((function(){Xt(t)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xt(e){var t,r=Math.floor(Date.now()/1e3),n=e-r;if(n<=0)return console.log("start race!!"),document.querySelector('[data-screen="gameIntro"] .countdown').classList.add("hide"),document.querySelector('[data-screen="gameIntro"] .leader').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .tracks').classList.add("hot"),void function(e){console.log("move horses:",e);var t=0,r=function(e){var t=e.sort((function(e,t){return e.frame-t.frame})),r=t.filter((function(e){return e.frame===t[0].frame})).sort((function(e,t){return e.steps-t.steps}))[0];console.log("==== GET WINNER ",r);var n=window.app.host.playerList[r.player].playerName;return console.log("==== PLAYER NAME ",n),n}(e),n=setInterval((function(){console.log("move horses",t);var o=e.map((function(e){return e.frame})).sort((function(e,t){return e-t}));console.log("frames:",o);for(var i=0;i<e.length;i++){var a=e[i].distances,c=document.querySelector('[data-screen="gameIntro"] .track[data-key="'.concat(e[i].player,'"] .horse'));console.log("distance",a[t]),t>=o[0]?Qt(c,40):Qt(c,a[t])}t>=o[0]+1&&(clearInterval(n),setTimeout((function(){document.querySelector('[data-screen="gameIntro"] .tracks').classList.remove("hot"),document.querySelector('[data-screen="gameIntro"] .race-again').classList.remove("hide"),document.querySelector('[data-screen="gameIntro"] .leader').innerHTML="winner: ".concat(r),Bt=!0}),1e3)),t+=1}),1e3)}((t=window.app.host.playerList,Object.keys(t).map((function(e){for(var t=[],r=0,n=0,o=0,i=0;i<100;i++){var a=Zt(30,40);if(r+a>=960){n=i,o=960-r;break}t.push(a),r+=a}return{distances:t,frame:n,player:e,steps:o}}))));document.querySelector('[data-screen="gameIntro"] .countdown').innerHTML=n,setTimeout((function(){Xt(e)}),1e3)}function Qt(e,t){console.log("move horse:",e,t),e.style.marginLeft="".concat(parseInt(e.style.marginLeft,10)+t,"px")}function Zt(e,t){return Math.floor(Math.random()*(t-e+1))+e}var er={gameIntro:function(){console.log("render game intro"),zt&&(zt=!1,Yt=document.querySelector('[data-screen="gameIntro"]').innerHTML),function(){if(!Bt)return;Bt=!1,document.querySelector('[data-screen="gameIntro"]').innerHTML=Yt,function(){var e=app.host.playerList;console.log("update player list",e);var t=Object.keys(e).map((function(t){var r=e[t],n=r.playerName,o=r.hue;return'<div class="track" data-key='.concat(t,'><div class="horse" style="margin-left: -100px; filter: hue-rotate(').concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="gameIntro"] .tracks').innerHTML=t}(),function(){Wt.apply(this,arguments)}()}()},lobby:function(){console.log("render the lobby");var e=window.app.host,t=e.code,r=e.playerList;t&&function(e){document.querySelector('[data-screen="lobby"] .room-code').innerText=e}(t),function(e){console.log("update player list",e);var t=Object.keys(e).map((function(t){var r=e[t],n=r.playerName,o=r.hue;return'<div class="track"><div class="horse" style="filter: hue-rotate('.concat(o,'deg)"></div><div class="player-name">').concat(n,"</div></div>")})).join("");document.querySelector('[data-screen="lobby"] .tracks').innerHTML=t}(r),function(e,t){var r=Object.keys(e).length,n=document.querySelector('[data-screen="lobby"] button[data-action="startGame"]').parentNode;if(r<t)return void n.classList.add("hide");n.classList.remove("hide")}(r,2),console.log("beginning to render the lobby")}};var tr={lobby:function(){console.log("render the lobby");var e=window.app.player,t=e.code,r=e.playerList;t&&function(e){document.querySelector('[data-screen="lobby"] .room-code').innerText=e}(t),r&&function(e){console.log("update player list",e),document.querySelector('[data-screen="lobby"] .player-list').innerHTML=Object.keys(e).map((function(t){return'<div class="player">'.concat(e[t].playerName,"</div>")})).join("")}(r),console.log("beginning to render the lobby")}};function rr(e){return nr.apply(this,arguments)}function nr(){return(nr=Re(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.playerType,n=t.screen,console.log("render:",r,n),o={host:er,player:tr},e.next=5,o[r][n]();case 5:rt(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){console.log("on player list updated",e),window.app.player.playerList=e.exists()?e.toJSON():{},rr({playerType:"player",screen:"lobby"})}function ir(e){console.log("on screen updated",e),rr({playerType:"player",screen:e.exists()?e.toJSON():""})}var ar=function(){var e=O(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function cr(e,t){return RegExp(e,t)}var ur,lr,sr={UNSUPPORTED_Y:o((function(){var e=cr("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:o((function(){var e=cr("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},fr=RegExp.prototype.exec,pr=String.prototype.replace,dr=fr,hr=(ur=/a/,lr=/b*/g,fr.call(ur,"a"),fr.call(lr,"a"),0!==ur.lastIndex||0!==lr.lastIndex),yr=sr.UNSUPPORTED_Y||sr.BROKEN_CARET,vr=void 0!==/()??/.exec("")[1];(hr||vr||yr)&&(dr=function(e){var t,r,n,o,i=this,a=yr&&i.sticky,c=ar.call(i),u=i.source,l=0,s=e;return a&&(-1===(c=c.replace("y","")).indexOf("g")&&(c+="g"),s=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(u="(?: "+u+")",s=" "+s,l++),r=new RegExp("^(?:"+u+")",c)),vr&&(r=new RegExp("^"+u+"$(?!\\s)",c)),hr&&(t=i.lastIndex),n=fr.call(a?r:i,s),a?n?(n.input=n.input.slice(l),n[0]=n[0].slice(l),n.index=i.lastIndex,i.lastIndex+=n[0].length):i.lastIndex=0:hr&&n&&(i.lastIndex=i.global?n.index+n[0].length:t),vr&&n&&n.length>1&&pr.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var gr=dr;Te({target:"RegExp",proto:!0,forced:/./.exec!==gr},{exec:gr});var mr=De("species"),wr=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),br="$0"==="a".replace(/./,"$0"),xr=De("replace"),Sr=!!/./[xr]&&""===/./[xr]("a","$0"),Er=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),Lr=De("match"),Or=De("species"),Tr=function(e){return function(t,r){var n,o,i=String(h(t)),a=oe(r),c=i.length;return a<0||a>=c?e?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===c||(o=i.charCodeAt(a+1))<56320||o>57343?e?i.charAt(a):n:e?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},Ir={codeAt:Tr(!1),charAt:Tr(!0)}.charAt,kr=function(e,t,r){return t+(r?Ir(e,t).length:1)},Rr=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==f(e))throw TypeError("RegExp#exec called on incompatible receiver");return gr.call(e,t)},jr=[].push,Nr=Math.min,Pr=!o((function(){return!RegExp(4294967295,"y")}));function Mr(e,t){try{document.cookie="".concat(e,"=").concat(t)}catch(e){console.error("tried to cache data in a cookie:",e)}}function Ar(e){return _r.apply(this,arguments)}function _r(){return(_r=Re(regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,console.log("new player"),n=window.firebase.database().ref("rooms/".concat(r)),o="",i="",a=qr(),"0",Mr("playerName",a),e.next=10,n.child("players").push({playerName:a,hue:"0"}).then((function(e){console.log("player set"),o=e.getKey(),n.child("players").child(o).onDisconnect().remove(),console.log("display lobby"),rt("lobby")}));case 10:return e.abrupt("return",{code:r,listen:Cr,playerKey:o,playerList:i,ref:n});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qr(){return console.log("get player name"),document.querySelector('[data-input="player-name"]').value||"guest"}function Cr(){console.log("listening");var e=window.app.player.ref;e.child("players").on("value",or),e.child("screen").on("value",ir)}!function(e,t,r,n){var i=De(e),a=!o((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),c=a&&!o((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[mr]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return t=!0,null},r[i](""),!t}));if(!a||!c||"replace"===e&&(!wr||!br||Sr)||"split"===e&&!Er){var u=/./[i],l=r(i,""[e],(function(e,t,r,n,o){return t.exec===gr?a&&!o?{done:!0,value:u.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:br,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Sr}),s=l[0],f=l[1];Q(String.prototype,e,s),Q(RegExp.prototype,i,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)})}n&&k(RegExp.prototype[i],"sham",!0)}("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n,o,i=String(h(this)),a=void 0===r?4294967295:r>>>0;if(0===a)return[];if(void 0===e)return[i];if(!v(n=e)||!(void 0!==(o=n[Lr])?o:"RegExp"==f(n)))return t.call(i,e,a);for(var c,u,l,s=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,y=new RegExp(e.source,p+"g");(c=gr.call(y,i))&&!((u=y.lastIndex)>d&&(s.push(i.slice(d,c.index)),c.length>1&&c.index<i.length&&jr.apply(s,c.slice(1)),l=c[0].length,d=u,s.length>=a));)y.lastIndex===c.index&&y.lastIndex++;return d===i.length?!l&&y.test("")||s.push(""):s.push(i.slice(d)),s.length>a?s.slice(0,a):s}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var o=h(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,r):n.call(String(o),t,r)},function(e,o){var i=r(n,e,this,o,n!==t);if(i.done)return i.value;var a=O(e),c=String(this),u=function(e,t){var r,n=O(e).constructor;return void 0===n||null==(r=O(n)[Or])?t:Ne(r)}(a,RegExp),l=a.unicode,s=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Pr?"y":"g"),f=new u(Pr?a:"^(?:"+a.source+")",s),p=void 0===o?4294967295:o>>>0;if(0===p)return[];if(0===c.length)return null===Rr(f,c)?[c]:[];for(var d=0,h=0,y=[];h<c.length;){f.lastIndex=Pr?h:0;var v,g=Rr(f,Pr?c:c.slice(h));if(null===g||(v=Nr(ae(f.lastIndex+(Pr?0:h)),c.length))===d)h=kr(c,h,l);else{if(y.push(c.slice(d,h)),y.length===p)return y;for(var m=1;m<=g.length-1;m++)if(y.push(g[m]),y.length===p)return y;h=d=v}}return y.push(c.slice(d)),y}]}),!Pr);var Dr=!0;function Gr(){return console.log("get room code"),document.querySelector('[data-input="room-code"]').value.toLowerCase()}function Fr(){return(Fr=Re(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dr){e.next=2;break}return e.abrupt("return");case 2:if(!window.app.player){e.next=5;break}return e.abrupt("return");case 5:return Dr=!1,t=Gr(),r=window.firebase.database().ref("rooms/".concat(t)),n=!1,e.next=11,r.once("value").then((function(e){"lobby"===(e.toJSON()||{}).screen?n=!0:Dr=!0}));case 11:if(!n){e.next=18;break}return document.querySelector('[data-group="host"]').remove(),je("player"),e.next=16,new Ar({code:t});case 16:e.sent.listen();case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hr=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function Ur(){for(var e,t=[],r=0;r<4;r++)t[r]=(e=Hr)[Math.floor(Math.random()*e.length)];return t.join("")}function Jr(e){console.log("on player list updated",e),window.app.host.playerList=e.exists()?e.toJSON():{},rr({playerType:"host",screen:"lobby"})}function Vr(){return Kr.apply(this,arguments)}function Kr(){return(Kr=Re(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new host"),t=Ur(),r=window.firebase.database().ref("rooms/".concat(t)),n="",e.next=6,r.onDisconnect().remove();case 6:return e.next=8,r.set({screen:"lobby"});case 8:return e.abrupt("return",{code:t,listen:$r,playerList:n,ref:r});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(){console.log("listening"),window.app.host.ref.child("players").on("value",Jr)}var Yr=!0;function Br(){return(Br=Re(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.app.host){e.next=3;break}return e.abrupt("return");case 3:if(!Yr){e.next=12;break}return Yr=!1,document.querySelector('[data-group="player"]').remove(),je("host"),e.next=9,new Vr;case 9:e.sent.listen(),rr({playerType:"host",screen:"lobby"});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zr(e){return Wr.apply(this,arguments)}function Wr(){return(Wr=Re(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$t(),e.next=3,r.update({screen:t}).then((function(){rr({screen:t,playerType:"host"})}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xr(){return(Xr=Re(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("start game"),"gameIntro"!==window.app.screen&&zr("gameIntro");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qr=!0;function Zr(){return(Zr=Re(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qr){e.next=2;break}return e.abrupt("return");case 2:return r=t.target.dataset.hue,Qr=!1,n=$t(),o=window.app.player.playerKey,e.next=8,n.child("players").child(o).update({hue:r}).then((function(){console.log("hue is set:",r),Qr=!0}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var en={joinGame:function(){return Fr.apply(this,arguments)},newGame:function(){return Br.apply(this,arguments)},startGame:function(){return Xr.apply(this,arguments)},selectPony:function(e){return Zr.apply(this,arguments)},raceAgain:function(){console.log("race again"),zr("lobby")}};function tn(e){console.log("clicked:",e);var t=e.target.dataset.action||"";en[t]&&en[t](e)}var rn=[],nn=function(e){rn.push(e)},on=function(){nn("auto fill");var e,t,r=(e="playerName",(t=decodeURIComponent(document.cookie).split("; ").map((function(e){return e.split(/=/)})).filter((function(t){return t[0]===e}))).length?t[0][1]:"");r&&(document.querySelector('[data-input="player-name"]').value=r)},an={displayLog:function(){window.console.log(rn.join("\n"))}};window.addEventListener("load",(function(){nn("init"),window.app=an,on(),nn("add event listeners"),document.addEventListener("click",tn,!1)}))}()</script><!-- The core Firebase JS SDK is always required and must be listed first --><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script><!-- TODO: Add SDKs for Firebase products that you want to use
	     https://firebase.google.com/docs/web/setup#available-libraries --><script>var firebaseConfig={apiKey:"AIzaSyBCf6ie1SYSt1u3RNSuwOc2N4Ld-m3C6zA",authDomain:"climb-00.firebaseapp.com",databaseURL:"https://climb-00.firebaseio.com",projectId:"climb-00",storageBucket:"climb-00.appspot.com",messagingSenderId:"735552551317",appId:"1:735552551317:web:0b3bbefcc0b17337289e9c"};firebase.initializeApp(firebaseConfig)</script></body></html>